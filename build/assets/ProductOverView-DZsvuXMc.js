import{j as e,W as Ce,Y as _e,az as Se,Z as De,U as j,B as h,f as L,H as Ie,g as ne,u as g,p as Te,r as n,a as Ae,I as Fe,aw as Oe,t as m,F as Ve,aA as Me,aB as Re,K as c,ax as ce,J as w}from"./index-nRz7PDd4.js";import{B as ze,a as Qe,b as ke,d as de,c as oe}from"./breadcrumb-gFg8juDx.js";import{S as P,a as B,b as C,c as _,d as i,e as V,D as Ze}from"./DatePicker-DKzNGpRI.js";import{c as Le}from"./cart.service-Srtsotdm.js";import{m as J}from"./mergeName-Dsr0uQzc.js";import{c as me}from"./currencyConvertor-IA5kyJ7b.js";import{d as k}from"./dateFormatter-CQy79qr9.js";import{b as M}from"./bid.service-0Dku6ybv.js";import{C as Ee}from"./CustomSkeletons-D9FdukaD.js";import{H as qe}from"./house-CnFQLAg5.js";import{P as ue}from"./paperclip-Bd-cXF6K.js";import"./index-DwGfctKw.js";import"./index-CppV2h3m.js";import"./check-B8w4PIHT.js";import"./chevron-up-DirSqPcx.js";import"./calendar-days-u-qCTdjE.js";const Ue=({open:u,setOpen:S,setValue:b,value:l,handleCreteBid:E,createBidLoading:r,setBusinessDets:f,businessDets:p})=>e.jsx(e.Fragment,{children:e.jsx(Ce,{open:u,onOpenChange:S,children:e.jsx(_e,{className:"w-4xs",children:e.jsxs("form",{onSubmit:d=>{d.preventDefault(),E()},className:"p-2 max-w-md inline-block space-y-5 ",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Se,{className:" text-black text-3xl font-extrabold ",children:"Seller Verification"}),e.jsx(De,{className:" text-sm text-gray-600",children:" Placing Quote as an Individual or Business Owner?"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(P,{onValueChange:d=>b?.(d),value:l,children:[e.jsx(B,{id:"userType",className:"w-full py-5 rounded-md border border-gray-300",children:e.jsx(C,{placeholder:"Select"})}),e.jsxs(_,{children:[e.jsx(i,{value:"individual",className:"dropdown-hover py-2",children:"Individual"}),e.jsx(i,{value:"business",className:"dropdown-hover py-2",children:"Business Owner"})]})]}),l==="business"&&e.jsxs("div",{className:"grid space-y-2 mt-4",children:[e.jsx(j,{value:p.company_name,onChange:d=>{f({...p,company_name:d.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"company_name",placeholder:"Company Name"}),e.jsx(j,{value:p.company_reg_num,onChange:d=>{f({...p,company_reg_num:d.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"company_reg_num",placeholder:"Company Reg. Number"}),e.jsx(j,{value:p.gst_num,onChange:d=>{f({...p,gst_num:d.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"gst_num",placeholder:"GSTIN Number"})]}),e.jsx(h,{disabled:!l||r,type:"submit",className:"w-full rounded-sm py-5  text-white font-bold cursor-pointer",children:r?e.jsx(L,{className:"w-5 h-5 animate-spin"}):"Place Quote"})]})]})})})});function Z(u){return u?.brand==="others"&&u.hasOwnProperty("brandName")?u.brandName:u?.brand}const ds=()=>{const[u]=Ie(),S=u.get("productId"),b=u.get("bidId"),l=ne(),{fn:E,data:r,setData:f,loading:p}=g(Te.getProductById),{fn:d,data:s,loading:pe}=g(M.bidOverViewbyId),{fn:xe,data:W,loading:K}=g(M.updateUserBidDets),{fn:he,data:q,loading:$}=g(M.getbidByProductId),{fn:ge,data:X,loading:ee}=g(M.createBid),{fn:je}=g(M.createRequirement),{fn:be,data:y,loading:R}=g(Le.addToCart),[fe,se]=n.useState(!1),[ye,z]=n.useState(!1),[D,U]=n.useState(""),[G,Ne]=n.useState({company_name:"",company_reg_num:"",gst_num:""}),Y=Ae(),{handleSubmit:ve,formState:{errors:H},register:I,reset:Q,control:N,getValues:T,setValue:Ge}=Fe({resolver:Oe(Re),defaultValues:{firstName:"",lastName:"",budgetQuation:"",earliestDeliveryDate:void 0,sellerType:"",priceBasis:"",taxes:"",location:"",freightTerms:"",paymentTerms:"",buyerNote:""}}),ae=async a=>{await be(a)};n.useEffect(()=>{y&&(y&&(y?.message).match(/already/)!==null?m.warning(y.message):m.success(y.message))},[y]),n.useEffect(()=>{S?E(S):b?d(b):m.error("Invalid request")},[S,b]),n.useEffect(()=>{if(r&&Array.isArray(r)){const a=r[0],t=a?.subProducts?.length>0?a.subProducts:[a];f({...a,products:t}),console.log(r)}},[r]);async function we(){if(!r||r?.mainProduct?.userId?._id===l?.user?._id)return;if(T(),D==="business"&&!G.company_name.trim()){m.error("company name is required");return}const a=r?.mainProduct.userId?._id,t=r?.mainProduct._id;l?.user._id,Number(T().budgetQuation);let o={...T(),status:"active",businessType:D,...D==="business"&&{businessDets:G}};D||(m.error("business is required !"),z(!0));try{await ge(a,t,o)}catch(A){console.log(A),m.error("Failed to place Quote")}}async function Pe(a){const t=l?.user,o=T();if(!t?._id)return localStorage.setItem("preLoginBidForm",JSON.stringify(o)),se(!0);if(!r&&!s)return console.log("product && Quote not found in frontend");r?z(!0):await xe(b,a)}n.useEffect(()=>{W&&(m.success("Quote updated successfully"),U(""))},[W]),n.useEffect(()=>{if(X){r?.mainProduct?f(x=>{const v={...x.mainProduct,totalBidCount:x.mainProduct.totalBidCount+1},F=x.subProducts?.map(O=>({...O,totalBidCount:(O.totalBidCount||0)+1}));return{...x,mainProduct:v,subProducts:F,products:F}}):console.log("main product is missing to update bid count");const a=r?.mainProduct.userId?._id,t=r?.mainProduct._id,o=l?.user._id,A=Number(T().budgetQuation)||0;je({productId:t,sellerId:o,buyerId:a,budgetAmount:A}),m.success("Quote created successfully"),z(!1),U(""),Q({firstName:l.user.firstName,lastName:l.user.lastName,budgetQuation:"",earliestDeliveryDate:void 0,taxes:"",buyerNote:"",freightTerms:"",location:"",paymentTerms:"",priceBasis:"",sellerType:""})}},[X]),n.useEffect(()=>{if(l?.user){const a=localStorage.getItem("preLoginBidForm");if(a){const t=JSON.parse(a);Q({...t,firstName:s?s?.seller?.firstName:l.user.firstName,lastName:s?s?.seller?.lastName:l.user.lastName}),localStorage.removeItem("preLoginBidForm")}else Q({firstName:s?s?.seller?.firstName:l.user.firstName,lastName:s?s?.seller?.lastName:l.user.lastName,budgetQuation:s?s?.budgetQuation:"",earliestDeliveryDate:s?s?.earliestDeliveryDate:void 0,sellerType:s?s?.sellerType:"",priceBasis:s?s?.priceBasis:"",taxes:s?s?.taxes:"",location:s?s?.location:"",freightTerms:s?s?.freightTerms:"",paymentTerms:s?s?.paymentTerms:"",buyerNote:s?s?.buyerNote:""})}},[l,Q,s]),n.useEffect(()=>{},[]),n.useEffect(()=>{for(let a=0;a<Object.entries(H).length;a++){m.error(Object.entries(H)[a][1]?.message);break}},[H]);const re=a=>{const t=document.createElement("a");t.href=a,t.download=a.split("/").pop()||"document",t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},te=async a=>{await he(a)};n.useEffect(()=>{if(q){const{_id:a}=q;Y("/bid-overview/"+a)}},[q]);const le=()=>e.jsxs("form",{className:"lg:col-span-5 bg-gray-200/80 rounded-lg p-6 space-y-4",onSubmit:ve(Pe),children:[e.jsx("h3",{className:"font-semibold text-orange-600",children:"Seller Quotation Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l?.user?._id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"firstName",className:"mb-2 text-sm",children:"First Name"}),e.jsx(j,{disabled:!0,type:"text",placeholder:"First Name",id:"firstName",...I("firstName"),className:"bg-white  select-none"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"lastName",className:"mb-2 text-sm",children:"Last Name"}),e.jsx(j,{disabled:!0,type:"text",placeholder:"Last Name",id:"lastName",...I("lastName"),className:"bg-white  select-none"})]})]}),e.jsxs("div",{children:[e.jsx(c,{className:"mb-2 text-sm",children:"Seller Type"}),e.jsx(w,{name:"sellerType",control:N,render:({field:a})=>e.jsxs(P,{onValueChange:a.onChange,value:a.value,children:[e.jsx(B,{className:"w-full bg-white",children:e.jsx(C,{placeholder:"Select Seller Type"})}),e.jsx(_,{children:e.jsxs(V,{children:[e.jsx(i,{value:"manufacturer",children:"Manufacturer"}),e.jsx(i,{value:"trader_wholesaler",children:"Trader / Wholesaler"}),e.jsx(i,{value:"distributor",children:"Distributor"}),e.jsx(i,{value:"service_provider",children:"Service Provider"})]})})]})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Quoted Price(â‚¹)"}),e.jsx(j,{type:"number",placeholder:"Quoted Price",className:"bg-white",...I("budgetQuation")})]}),e.jsxs("div",{children:[e.jsx(c,{className:"mb-2 text-sm",children:"Price Basis"}),e.jsx(w,{name:"priceBasis",control:N,render:({field:a})=>e.jsxs(P,{onValueChange:a.onChange,value:a.value,children:[e.jsx(B,{className:"w-full bg-white",children:e.jsx(C,{placeholder:"Select Price Basis"})}),e.jsx(_,{children:e.jsxs(V,{children:[e.jsx(i,{value:"per_unit",children:"Per Unit"}),e.jsx(i,{value:"per_kg",children:"Per Kg"}),e.jsx(i,{value:"per_lot",children:"Per Lot"}),e.jsx(i,{value:"per_piece",children:"Per Piece"}),e.jsx(i,{value:"per_service",children:"Per Service"})]})})]})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"mb-2 text-sm",children:"Taxes"}),e.jsx(w,{name:"taxes",control:N,render:({field:a})=>e.jsxs(P,{onValueChange:a.onChange,value:a.value,children:[e.jsx(B,{className:"w-full bg-white",children:e.jsx(C,{placeholder:"Select Taxes"})}),e.jsx(_,{children:e.jsxs(V,{children:[e.jsx(i,{value:"inclusive_gst",children:"Inclusive of GST"}),e.jsx(i,{value:"exclusive_gst",children:"Exclusive of GST"}),e.jsx(i,{value:"gst_rate",children:"GST Rate (%)"})]})})]})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Location"}),e.jsx(j,{type:"text",placeholder:"Location",className:"bg-white",...I("location")})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Delivery Timeline"}),e.jsx(w,{control:N,name:"earliestDeliveryDate",render:({field:a})=>e.jsx(Ze,{disabledBeforeDate:new Date(new Date().getTime()),date:a.value,title:"DD-MM-YYYY",className:"w-full",setDate:t=>a.onChange(t)})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"mb-2 text-sm",children:"Freight Terms"}),e.jsx(w,{name:"freightTerms",control:N,render:({field:a})=>e.jsxs(P,{onValueChange:a.onChange,value:a.value,children:[e.jsx(B,{className:"w-full bg-white",children:e.jsx(C,{placeholder:"Select Freight Terms"})}),e.jsx(_,{children:e.jsxs(V,{children:[e.jsx(i,{value:"ex_works",children:"Ex-Works"}),e.jsx(i,{value:"fob",children:"FOB"}),e.jsx(i,{value:"delivered",children:"Delivered (DAP / DDP)"})]})})]})})]}),e.jsxs("div",{children:[e.jsx(c,{className:"mb-2 text-sm",children:"Payment Terms"}),e.jsx(w,{name:"paymentTerms",control:N,render:({field:a})=>e.jsxs(P,{onValueChange:a.onChange,value:a.value,children:[e.jsx(B,{className:"w-full bg-white",children:e.jsx(C,{placeholder:"Select Payment Terms"})}),e.jsx(_,{children:e.jsxs(V,{children:[e.jsx(i,{value:"advance",children:"Advance"}),e.jsx(i,{value:"partial_advance",children:"Partial Advance"}),e.jsx(i,{value:"on_delivery",children:"On Delivery"}),e.jsx(i,{value:"credit",children:"Credit (X days)"})]})})]})})]}),e.jsxs("div",{className:"w-full col-span-2",children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Buyer Note"}),e.jsx(ce,{...I("buyerNote"),placeholder:"Short message (hard limit: 300 characters)",className:"bg-white w-full"})]})]}),s?e.jsx(h,{type:"submit",disabled:K,variant:"ghost",className:"w-32 float-end border shadow-orange-500 border-orange-500 bg-orange-600  transition-all ease-in-out duration-300 hover:bg-orange-500 text-white hover:text-white cursor-pointer",children:K?e.jsx(L,{className:"w-5 h-5 animate-spin"}):"Update Bid"}):e.jsx(h,{type:"submit",disabled:r?.mainProduct?.userId?._id===l?.user?._id||ee,variant:"ghost",className:"w-32 float-end border text-xs bg-orange-700  transition-all ease-in-out duration-300 hover:bg-orange-600 text-white hover:text-white cursor-pointer",children:"Place Quote"}),e.jsx("div",{})]}),Be=()=>{const{user:a}=ne(),[t,o]=n.useState({message:""});function A(x){x.preventDefault();const v=r?.mainProduct,F=a._id,O=v?.userId?._id;if(v?.dealStatus==="completed"){m.error("This product has already been sold");return}localStorage.setItem("chatIds",JSON.stringify({productId:v._id,buyerId:O,sellerId:F})),Y("/chat",{state:{productId:v._id,buyerId:O,sellerId:F,partnerName:J(a),partnerAvatar:a?.profileImage,message:t.message}})}return e.jsxs("form",{className:"lg:col-span-5 bg-gray-200/80 rounded-lg p-6 space-y-4 my-auto h-fit",onSubmit:A,children:[e.jsx("h3",{className:"font-semibold text-orange-600",children:"Merge Quote"}),e.jsxs("div",{className:"w-full col-span-2",children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Note for Buyer"}),e.jsx(ce,{value:t.message,onInput:x=>{o({message:x.currentTarget.value})},placeholder:"Short message (hard limit: 300 characters)",className:"bg-white w-full min-h-32"})]}),e.jsx(h,{type:"submit",disabled:r?.mainProduct?.userId?._id===l?.user?._id||t.message.trim().length<2,variant:"ghost",className:"w-32 float-end border text-xs bg-orange-700  transition-all ease-in-out duration-300 hover:bg-orange-600 text-white hover:text-white cursor-pointer",children:"Chat Now"})]})},ie=r?.mainProduct?.isMergeQuote;return e.jsx(e.Fragment,{children:pe||p?e.jsx("div",{className:"max-w-7xl mx-auto p-4 ",children:e.jsx(Ee,{})}):e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 min-h-screen",children:[e.jsx(Ve,{setOpen:se,open:fe}),e.jsx(Ue,{businessDets:G,setBusinessDets:Ne,setOpen:z,open:ye,setValue:U,value:D,handleCreteBid:we,createBidLoading:ee}),e.jsx(ze,{className:"hidden sm:block",children:e.jsx(Qe,{children:e.jsxs(ke,{className:"flex items-center gap-2 cursor-pointer ",onClick:()=>Y(-1),children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx(de,{}),e.jsx(oe,{className:"capitalize font-regular text-gray-500",children:"Product"}),e.jsx(de,{}),e.jsx(oe,{className:"capitalize font-regular text-gray-500",children:s?s?.product?.title:r?.mainProduct?.title})]})})}),r?.subProducts?.length===0||s?e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-4 bg-gray-100 flex justify-center items-center rounded-lg p-4 max-h-64 ",children:e.jsx("img",{src:(s?s?.product?.image:r?.mainProduct?.image)||"/no-image.webp",alt:"Product",className:"object-contain h-full w-full mix-blend-darken"})}),e.jsxs("div",{className:"lg:col-span-8 bg-transparent rounded-lg p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-medium mb-2",children:["Date : ",k(s?s?.product?.createdAt:r?.mainProduct?.createdAt)]}),e.jsx("h2",{className:"text-xl font-bold capitalize",children:s?s?.product?.title:r?.mainProduct?.title}),e.jsx("p",{className:"text-sm text-gray-600",children:r?.mainProduct?.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1 pr-3 border-r-2 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{className:"capitalize",children:J(s?s?.buyer:r?.mainProduct?.userId)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1  pr-3 border-r-2 py-1 min-w-32   max-w-[50%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:" line-clamp-2",children:s?s?.buyer?.address:r?.mainProduct?.userId?.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{className:"capitalize",children:[s?s?.product?.quantity:r?.mainProduct?.quantity||"N/A"," units"]})]})]}),!ie&&e.jsxs("div",{className:"flex items-center gap-4 mt-5 ",children:[e.jsxs(h,{disabled:$||(s?s.product?.totalBidCount:r?.mainProduct?.totalBidCount)===0,onClick:()=>te(s?s?.product?._id:r?.mainProduct?._id),variant:"outline",className:"min-w-32 text-sm border-gray-400 bg-transparent border-[2px] flex items-center gap-2 hover:bg-transparent  cursor-pointer",children:[e.jsx("img",{src:"/icons/Layer_1.png",className:"w-4 h-4 "}),"Total Quote :",e.jsx("span",{className:"font-semibold",children:s?s.product?.totalBidCount:r?.mainProduct?.totalBidCount||0})]}),!s&&e.jsx(h,{className:"min-w-32 border-[2px] border-orange-500 text-orange-500 hover:bg-orange-600 hover:text-white transition-all ease-in-out duration-300 cursor-pointer",variant:"outline",onClick:()=>ae(r?.mainProduct?._id),disabled:R||r?.mainProduct?.userId?._id===l?.user?._id,children:R?e.jsx(L,{className:"w-5 h-5 animate-spin"}):"Add to Cart"})]})]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-12 gap-6 ",children:[e.jsxs("div",{className:"lg:col-span-7  rounded-lg p-6 space-y-3 ",children:[e.jsx("h3",{className:"font-semibold text-orange-600 text-xl",children:"Requirement Specifications"}),e.jsxs("div",{className:"text-sm space-y-2 text-gray-600 ",children:[e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Product Condition:"})," ",(s?s?.product?.subCategory?.name:r?.mainProduct?.categoryId?.categoryName)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Brand:"})," ",Z(s?s?.product:r?.mainProduct)||"N/A"]}),r?.mainProduct?.categoryId?.categoryName==="industrial"&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Construction Tool Type:"})," Industrial Tool"]}),(s?.product?.minimumBudget||r?.mainProduct?.minimumBudget)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Budget:"})," ",me(s?s?.product?.minimumBudget:r?.mainProduct?.minimumBudget)]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Required Delivery Date:"})," ",k(s?s?.product?.paymentAndDelivery?.ex_deliveryDate:r?.mainProduct?.paymentAndDelivery?.ex_deliveryDate)||"N/A"]}),(s?s?.product?.color:r?.mainProduct?.color)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Color:"})," ",(s?s?.product?.color:r?.mainProduct?.color)||"N/A"]}),(s?s?.product?.typeOfVehicle:r?.mainProduct?.typeOfVehicle)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Vehicle:"})," ",(s?s?.product?.typeOfVehicle:r?.mainProduct?.typeOfVehicle)||"N/A"]}),(s?s?.product?.typeOfProduct:r?.mainProduct?.typeOfProduct)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Product:"})," ",(s?s?.product?.typeOfProduct:r?.mainProduct?.typeOfProduct)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Payment Mode:"})," ",(s?s?.product?.paymentAndDelivery?.paymentMode:r?.mainProduct?.paymentAndDelivery?.paymentMode)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2  ",children:[e.jsx("span",{className:"font-semibold",children:"Supporting Documents:"}),r?.mainProduct?.document||s?.product?.document?e.jsxs("p",{onClick:()=>re(r?.mainProduct?.document||s?.product?.document),className:"flex gap-1 items-center hover:underline cursor-pointer",children:[e.jsx(ue,{className:"w-4 h-4 text-orange-600"}),"Download Document"]}):"N/A"]})]})]}),ie?e.jsx(Be,{}):e.jsx(le,{})]})]}):r?.subProducts&&r?.subProducts.map((a,t)=>{const o=t===r?.subProducts?.length-1;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-4 bg-gray-100 flex justify-center items-center rounded-lg p-4 max-h-64 ",children:e.jsx("img",{src:(s?s?.product?.image:a?.image)||"/no-image.webp",alt:"Product",className:"object-contain h-full w-full mix-blend-darken"})}),e.jsxs("div",{className:"lg:col-span-8 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-medium mb-2",children:["Date : ",k(s?s?.product?.createdAt:a?.createdAt)]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(Me,{className:"w-5 h-5 text-orange-500"}),e.jsxs("p",{className:"text-gray-500 text-sm font-semibold",children:["Product (",t+1,")"]})]})]}),e.jsx("h2",{className:"text-xl font-bold capitalize",children:s?s?.product?.title:a?.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a?.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1 pr-3 border-r-2 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{className:"capitalize",children:J(s?s?.buyer:a?.userId)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1  pr-3 border-r-2 py-1 min-w-32   max-w-[50%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:" line-clamp-2",children:s?s?.buyer?.address:a?.userId?.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{className:"capitalize",children:[s?s?.product?.quantity:a?.quantity||"N/A"," units"]})]})]}),t===0&&e.jsxs("div",{className:"flex items-center gap-4 mt-5 ",children:[e.jsxs(h,{disabled:$||(s?s.product?.totalBidCount:a?.totalBidCount)===0,onClick:()=>te(s?s?.product?._id:a?._id),variant:"outline",className:"min-w-32 text-sm border-gray-400 bg-transparent border-[2px] flex items-center gap-2 hover:bg-transparent  cursor-pointer ",children:[e.jsx("img",{src:"/icons/Layer_1.png",className:"w-4 h-4 "}),"Total Quote :",e.jsx("span",{className:"font-semibold",children:s?s.product?.totalBidCount:a?.totalBidCount||0})]}),!s&&e.jsx(h,{className:"min-w-32 border-[2px] border-orange-500 text-orange-500 hover:bg-orange-600 hover:text-white transition-all ease-in-out duration-300 cursor-pointer",variant:"outline",onClick:()=>ae(a?._id),disabled:R||a?.userId?._id===l?.user?._id,children:R?e.jsx(L,{className:"w-5 h-5 animate-spin"}):"Add to Cart"})]})]})]}),e.jsxs("div",{className:`mt-5 grid grid-cols-1 lg:${o?"grid-cols-12":"grid-cols-1"} gap-6`,children:[e.jsxs("div",{className:`grid lg:${o?"col-span-7":"col-span-1"}  rounded-lg  space-y-3 `,children:[e.jsx("h3",{className:"font-semibold text-orange-600 text-xl",children:"Requirement Specifications"}),e.jsxs("div",{className:"text-sm space-y-2 text-gray-600 ",children:[e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Product Condition:"})," ",(s?s?.product?.subCategory?.name:a?.categoryId?.categoryName)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Brand:"})," ",Z(s?s?.product:a)||"N/A"]}),a?.categoryId?.categoryName==="industrial"&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Construction Tool Type:"})," Industrial Tool"]}),(s?.product?.minimumBudget||a?.minimumBudget)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Budget:"})," ",me(s?s?.product?.minimumBudget:a?.minimumBudget)]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Required Delivery Date:"})," ",k(s?s?.product?.paymentAndDelivery?.ex_deliveryDate:a?.paymentAndDelivery?.ex_deliveryDate)||"N/A"]}),(s?s?.product?.color:a?.color)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Color:"})," ",(s?s?.product?.color:a?.color)||"N/A"]}),(s?s?.product?.typeOfVehicle:a?.typeOfVehicle)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Vehicle:"})," ",(s?s?.product?.typeOfVehicle:a?.typeOfVehicle)||"N/A"]}),(s?s?.product?.typeOfProduct:a?.typeOfProduct)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Product:"})," ",(s?s?.product?.typeOfProduct:a?.typeOfProduct)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Payment Mode:"})," ",s?s?.product?.paymentAndDelivery?.paymentMode:a?.paymentAndDelivery?.paymentMode||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2  ",children:[e.jsx("span",{className:"font-semibold",children:"Supporting Documents:"}),a?.document||s?.product?.document?e.jsxs("span",{onClick:()=>{re(a?.document||s?.product?.document)},className:"flex gap-1 items-center hover:underline cursor-pointer",children:[e.jsx(ue,{className:"w-4 h-4 text-orange-600"})," ",a?.document||s?.product?.document]}):"N/A"]})]})]}),t===r?.products?.length-1&&e.jsx(le,{})]}),r?.subProducts.length>-1&&t<r?.subProducts.length-1&&e.jsx("div",{className:"bg-gray-400 w-full h-[2px] my-5"})]})})]})})};export{ds as default};
