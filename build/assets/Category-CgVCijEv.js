import{j as e,D as de,a as ue,b as me,c as pe,N as he,I as j,B as ee,h as ce,t as h,n as ge,O as xe,r as l,k as le,p as fe,Q as je,i as ye,A as be,s as ve,v as Ne,w as we,R as Ce,y as ie,x as Se,U as Fe,V as De,W as Te,X as Ae,Y as Pe,Z as Ie,_ as Be,$ as Ve,a0 as qe,a1 as ke,a2 as $e,o as Ee,q as Me,a3 as Re,a4 as Oe,S as P,d as I,e as B,f as V,g as r,a5 as _e,L as re,a6 as ne,a7 as Le,a8 as ze,a9 as oe,aa as Ue,ab as Ge,T as Ze,M as Qe}from"./index-DIGWnl-X.js";const He=({open:d,setOpen:n,createProductFn:q,bidDuration:k,setBidDuration:O,loading:y,buttonType:z})=>{async function U(x){x.preventDefault();const w=Number(x.currentTarget?.bidDuration.value);if(w<=0){h.error("Quote duration must be greater than 0");return}O(w),k&&(await q(!1),n(!1))}function $(x){const w=x.currentTarget.value.replace(/\D/g,"");O(Number(w))}function S(x){console.log(x.key),x.key.toLowerCase()==="."&&x.preventDefault()}return e.jsx(de,{open:d,onOpenChange:n,children:e.jsxs(ue,{style:{maxWidth:"470px"},children:[e.jsxs(me,{children:[e.jsx(pe,{className:"text-black text-3xl font-extrabold",children:"Place Requirement"}),e.jsxs(he,{className:"text-sm text-gray-600",children:["How Long Should Your Requirement Remain Active?  ",e.jsx("small",{className:"italic",children:"(in Days)"})]})]}),e.jsx("form",{className:"py-2 max-w-md inline-block mb-0",onSubmit:x=>U(x),children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx(j,{type:"number",name:"bidDuration",placeholder:"Ex. 15",onKeyDown:S,value:k||void 0,className:"w-full py-5 rounded-md border border-gray-300",onChange:$}),e.jsx(ee,{disabled:k&&k<=0||y,type:"submit",className:"w-full rounded-sm py-5  text-white font-bold cursor-pointer",children:y&&!z?e.jsx(ce,{className:"w-5 h-5 animate-spin"}):"Place Requirement "})]})})]})})},Ye={automobile:"automobileFormImage.png",fashion:"fashionFormImage.png",electronics:"electronicsFormImage.png",home:"homeapplianceFormImage.png",sports:"sportsFormImage.png",furniture:"furnitureFormImage.png",health:"healthFormImage.png",beauty:"beautyFormImage.png",service:"servicesFormImage.png",industrial:"constructionFormImage.png",others:"otherImage.webp"};function Je(d){switch(d){case"automobile":return ke;case"fashion":return qe;case"electronics":return Ve;case"home":return Be;case"sports":return Ie;case"furniture":return Pe;case"beauty":return Ae;case"industrial":return Te;case"service":return De;case"others":return Fe;default:return[]}}const Ke=({formIndex:d,currentCategoryName:n,catByIdData:q,subCategroies:k,subCategoriesData:O,onFormDataChange:y,onRemoveForm:z,showRemoveButton:U=!1,resetForm:$=!1,subCategoryId:S})=>{const[x,w]=l.useState(void 0),[C,E]=l.useState([0,2]),[u,G]=l.useState(null),[N,Z]=l.useState(null),[F,Q]=l.useState(""),[te,K]=l.useState([]),T=l.useRef(null),D=l.useRef(null),{watch:b,setValue:o,register:f,getValues:M,reset:H}=Ee({resolver:Me(Re),defaultValues:{title:"",quantity:"",subCategoryId:"",minimumBudget:"",productType:"",oldProductValue:{min:"",max:""},productCondition:"",image:"",document:"",description:"",paymentAndDelivery:{ex_deliveryDate:void 0,paymentMode:"",gstNumber:"",organizationName:"",organizationAddress:""},draft:!1,gst_requirement:"",brand:"",additionalDeliveryAndPackage:"",gender:"",typeOfAccessories:"",fuelType:"",model:"",color:"",transmission:"",conditionOfProduct:"",toolType:"",rateAService:"",brandName:"",typeOfVehicle:"",typeOfProduct:""}}),W=b("gst_requirement"),_=b("productType"),se=b("paymentAndDelivery.paymentMode"),Y=b("gender"),s=b("fuelType"),m=b("color"),p=b("transmission"),c=b("conditionOfProduct"),L=b("toolType");b("rateAService");const[A,R]=l.useState("");l.useEffect(()=>{const t=b(()=>{const a={...M(),image:u,document:N,formIndex:d};y(d,a)});return()=>t.unsubscribe()},[b,u,N,d,y,M]),l.useEffect(()=>{o("oldProductValue.min",C[0].toString()),o("oldProductValue.max",C[1].toString())},[C,o]),l.useEffect(()=>{o("brand",F)},[F,o]),l.useEffect(()=>{$&&(H(),w(void 0),E([0,2]),G(null),Z(null),Q(""),K([]),T.current&&(T.current.value=""),D.current&&(D.current.value=""))},[$,H]);function ae(){if(S){const t=q?.subCategories.find(i=>i._id===S)?.name||"N/A",a=O.find(i=>i.category.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase())?.brands;R(t),a?.length>0&&K(a),o("subCategoryId",S)}}return l.useEffect(()=>{ae()},[S,q,O]),l.useEffect(()=>{F!=="other"&&o("brandName","")},[F]),e.jsxs("div",{className:" relative",children:[U&&e.jsx(ee,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-10 cursor-pointer",onClick:()=>z(d),children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 lg:col-span-1 bg-transparent  border-0 p-6 xs:grid xs:grid-cols-2 gap-6 space-y-4",children:[e.jsxs("div",{className:"col-span-1 align-center sm:block flex flex-col justify-center",children:[e.jsx("h2",{className:"text-[15px] font-semibold mb-2 text-center",children:"Tell us about your need"}),e.jsx("p",{className:"text-[13px] text-muted-foreground text-center",children:"Please help us tailor the experience by filling out the form below. If this isn't the category you meant to choose, you can go back and select another one."})]}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx("img",{src:"/categoryFormImages/"+Ye[n],alt:"",loading:"lazy",className:"m-auto w-full"})})]}),e.jsxs("div",{className:"col-span-2 md:col-span-2 flex flex-col gap-3",children:[e.jsx("div",{className:" rounded-[5px] p-6  bg-gray-200/50",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(j,{type:"text",placeholder:"Title* (Give a short title for your post - specify your required product in 3–4 words)",className:"bg-white col-span-1 md:col-span-3",...f("title")}),e.jsxs(P,{defaultValue:S,disabled:!0,children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Category*"})}),e.jsx(V,{children:k.map(t=>e.jsx(r,{value:t._id,children:t.name},t._id))})]}),n!=="service"&&n!=="others"&&e.jsx(_e,{setValue:Q,value:F,className:"w-full",dropdownTitle:"Brands*",renderItems:te}),n==="others"&&e.jsx(j,{type:"text",placeholder:"Brand Name...",value:F,onChange:t=>{Q(t.target.value)},className:"bg-white"}),n!=="others"&&F==="others"&&e.jsx(j,{type:"text",placeholder:"Specific Brand Name...",...f("brandName"),className:"bg-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"absolute top-1/2 left-2 text-sm  text-orange-600 font-semibold -translate-y-1/2",children:"₹"}),e.jsx(j,{type:"text",placeholder:"Enter a Budget range",...f("minimumBudget"),className:"bg-white  pl-5"})]}),n!=="service"&&e.jsx(j,{type:"string",placeholder:"Quantity*",...f("quantity"),className:"bg-white col-span-1"}),n==="fashion"&&e.jsxs(P,{value:Y,onValueChange:t=>o("gender",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Gender"})}),e.jsxs(V,{children:[e.jsx(r,{value:"male",children:"Male"}),e.jsx(r,{value:"female",children:"Female"}),e.jsx(r,{value:"kids",children:"Kids"})]})]}),n==="automobile"&&!["accessories","bicycles"].includes(A.toLowerCase())&&e.jsxs(e.Fragment,{children:[e.jsxs(P,{value:s,onValueChange:t=>o("fuelType",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Fuel Type"})}),e.jsxs(V,{children:[e.jsx(r,{value:"petrol",children:"Petrol"}),e.jsx(r,{value:"electric",children:"Diesel"}),e.jsx(r,{value:"cng",children:"CNG"}),e.jsx(r,{value:"hybrid",children:"Hybrid"}),e.jsx(r,{value:"electric",children:"Electric"}),e.jsx(r,{value:"electric",children:"LPG"})]})]}),!A.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Model",...f("model"),className:"bg-white col-span-1"}),!A.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Color",value:m,onChange:t=>{o("color",t.target.value)}}),!["scooters","accessories","bicycles"].includes(A.toLowerCase())&&e.jsxs(P,{value:p,onValueChange:t=>o("transmission",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Transmission"})}),e.jsxs(V,{children:[e.jsx(r,{value:"automatic",children:"Automatic"}),e.jsx(r,{value:"manual",children:"Manual"})]})]})]}),A.toLowerCase()==="mobile"&&e.jsx(j,{type:"text",placeholder:"Model",...f("model"),className:"bg-white col-span-1"}),(n==="furniture"||n==="sports"||n==="automobile"||n==="home"||n==="electronics")&&n!=="service"&&n!=="others"&&e.jsxs(e.Fragment,{children:[(_==="new_product"||_==="")&&e.jsxs(P,{value:_,onValueChange:t=>o("productType",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Product Condition"})}),e.jsxs(V,{children:[e.jsx(r,{value:"new_product",children:"New Product"}),e.jsx(r,{value:"old_product",children:"Old Product"})]})]}),_==="old_product"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full max-w-md border-[1.5px] border-gray-200 rounded-lg bg-white p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs(re,{className:"font-medium text-gray-500 ",children:["Old Product ",e.jsx("sup",{className:"hidden sm:block",children:"(in Years)"})]}),e.jsx(ne,{className:"w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>o("productType","new_product")})]}),e.jsx(Le.Range,{values:C,step:.1,min:0,max:20,onChange:t=>E(t),renderTrack:({props:t,children:a})=>e.jsxs("div",{...t,className:"h-1 w-full bg-gray-300 rounded relative",children:[e.jsx("div",{className:"absolute h-1 bg-orange-600 rounded",style:{left:`${C[0]/20*100}%`,width:`${(C[1]-C[0])/20*100}%`}}),a]}),renderThumb:({props:t})=>e.jsx("div",{...t,className:"w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center shadow"})}),e.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"text-gray-600 text-sm hidden sm:block",children:"Min."}),e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:C[0].toString().padStart(2,"0")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:C[1]}),e.jsx(re,{className:"text-gray-600 text-sm hidden sm:block",children:"Max."})]})]})]})})]}),n==="others"&&e.jsx(e.Fragment,{children:e.jsx(j,{type:"text",placeholder:"Product Condition",...f("productCondition"),className:"bg-white"})}),_==="new_product"&&n==="furniture"&&e.jsxs(P,{value:c,onValueChange:t=>o("conditionOfProduct",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Product Condition"})}),e.jsxs(V,{children:[e.jsx(r,{value:"new",children:"New"}),e.jsx(r,{value:"like_new",children:"Like New"}),e.jsx(r,{value:"excellent",children:"Excellent"}),e.jsx(r,{value:"good",children:"Good"}),e.jsx(r,{value:"fair",children:"Fair"}),e.jsx(r,{value:"poor",children:"Poor"}),e.jsx(r,{value:"for_parts_or_repair",children:"For Parts Or Repair"}),e.jsx(r,{value:"refurbished",children:"Refurbished"}),e.jsx(r,{value:"vintage",children:"Vintage (Used)"}),e.jsx(r,{value:"antique",children:"Antique"})]})]}),A==="Commercial and other Vehicle"&&n==="automobile"&&e.jsx(j,{type:"text",placeholder:"Type of Vehicle",...f("typeOfVehicle"),className:"bg-white"}),e.jsx(j,{type:"text",placeholder:n==="service"?"Service Type":"Product Type",...f("typeOfProduct"),className:"bg-white"}),n==="industrial"&&e.jsxs(P,{value:L,onValueChange:t=>o("toolType",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Tool Type"})}),e.jsxs(V,{children:[e.jsx(r,{value:"industrial_tool",children:"Industrial Tool"}),e.jsx(r,{value:"machinery_tool",children:"Machinery Type"})]})]})]})}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold  text-gray-700",children:"Other Details"}),e.jsx("sup",{className:"italic text-gray-500",children:"Product Image and document are not mandatory."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{onClick:()=>T?.current?.click(),className:"border-2 border-dashed relative border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer h-32",children:[e.jsx(ze,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsx("span",{className:"text-sm text-muted-foreground font-semibold",children:"Upload Image"}),e.jsx("p",{className:"text-xs text-gray-500 ",children:"to upload your image (max 2 MB)"}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:T,onChange:t=>{if(t.target.files?.[0]){const a=t.target.files[0];if(a.size>2*1024*1024){h.info("Image size should not exceed 2MB");return}G(a);const i={...M(),image:a,document:N,formIndex:d};y(d,i)}}}),u&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:u?.name}),u&&e.jsxs("div",{className:"absolute h-16 w-16 right-2 top-2 rounded-lg shadow select-none z-10 group",onMouseEnter:t=>oe(t.currentTarget.querySelector("img")),onMouseLeave:t=>oe(t.currentTarget.querySelector("img")),children:[e.jsx("img",{src:URL.createObjectURL(u),className:"h-full w-full bg-white object-contain imageSizer rounded-sm",alt:""}),e.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200  flex items-center justify-center cursor-pointer rounded-lg",onClick:t=>{t.stopPropagation(),G(null),T.current&&(T.current.value="");const a={...M(),image:null,document:N,formIndex:d};y(d,a)},children:e.jsx(ne,{className:"h-6 w-6 text-white"})})]})]}),e.jsxs("div",{onClick:()=>D.current?.click(),className:"border-2 border-dashed relative border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer",children:[e.jsx(Ue,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground text-center ",children:[e.jsx("span",{className:"font-semibold",children:"Browse From Device"})," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"to upload your doc/pdf (max 5 MB)"})]}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",hidden:!0,ref:D,onChange:t=>{if(t.target.files?.[0]){const a=t.target.files[0];if(a.size===0){h.error("Invalid Doc");return}if(a.size>5*1024*1024){h.info("Document size should not exceed 5MB");return}Z(a);const i={...M(),image:u,document:a,formIndex:d};y(d,i)}}}),N&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:N.name}),N&&e.jsx("div",{className:"absolute top-2 right-2 z-10 bg-orange-100 text-orange-500 rounded-sm  p-1 cursor-pointer",onClick:t=>{t.stopPropagation(),Z(null),D.current&&(D.current.value="");const a={...M(),image:u,document:null,formIndex:d};y(d,a)},children:e.jsx(Ge,{hoverChildren:e.jsx(ne,{className:"h-4 w-4"}),contentChildren:e.jsx("p",{children:"Remove Doc"})})})]})]}),e.jsx(Ze,{placeholder:"Description*",...f("description"),className:"bg-white min-h-24"})]}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Payment & Delivery Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(Qe,{date:x,title:"Delivery Date",disabledBeforeDate:new Date(new Date().getTime()),setDate:t=>{t&&(w(t),o("paymentAndDelivery.ex_deliveryDate",t))}}),e.jsxs(P,{value:se,onValueChange:t=>o("paymentAndDelivery.paymentMode",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"Payment Mode"})}),e.jsxs(V,{children:[e.jsx(r,{value:"cash",children:"Cash"}),e.jsx(r,{value:"card",children:"Banking or Online mode"}),e.jsx(r,{value:"upi",children:"Any"})]})]}),e.jsxs(P,{value:W,onValueChange:t=>o("gst_requirement",t),children:[e.jsx(I,{className:"w-full bg-white",children:e.jsx(B,{placeholder:"GST Input Required"})}),e.jsxs(V,{children:[e.jsx(r,{value:"yes",children:"Yes"}),e.jsx(r,{value:"no",children:"No"})]})]}),W==="yes"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{type:"text",placeholder:"GST Number (15 characters - Format: 22AAAAA0000A1Z5)",...f("paymentAndDelivery.gstNumber"),className:"bg-white",maxLength:15,onChange:t=>{const a=t.target.value.toUpperCase();o("paymentAndDelivery.gstNumber",a,{shouldValidate:!0})}}),e.jsx(j,{type:"text",placeholder:"Enity Name",...f("paymentAndDelivery.organizationName"),className:"bg-white"}),e.jsx(j,{type:"text",placeholder:"Entity Address",...f("paymentAndDelivery.organizationAddress"),className:"bg-white"})]})]})]})]})]})]})},Xe=()=>{const d=ge(),{categoryId:n,subCategoryId:q}=xe(),[k,O]=l.useState([]),[y,z]=l.useState([0]),[U,$]=l.useState({}),{fn:S,data:x,loading:w}=le(fe.addProduct),{fn:C,data:E}=le(je.getCategoriesById),[u,G]=l.useState(null);let{user:N}=ye();const[Z,F]=l.useState(!1),[Q,te]=l.useState([]),[K,T]=l.useState(!1),[D,b]=l.useState(null),[o,f]=l.useState(void 0),[M,H]=l.useState(!1);l.useEffect(()=>{(async()=>await C(n))()},[n]),l.useEffect(()=>{if(E){try{const s=decodeURIComponent(E?.categoryName).toLowerCase();te(Je(s)),G(s||null)}catch(s){console.error("Error decoding category name:",s),G(null)}O(E?.subCategories||[])}},[E]);const W=(s,m)=>{const p=/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/;for(let c=0;c<s.length;c++)if(s[c].title){if(!s[c].subCategoryId&&!m)return h.error(`Category is required ${s.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!s[c].brand&&u?.toLowerCase()!=="service"&&!m)return h.error(`Brand is required ${s.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!s[c].quantity&&u?.toLowerCase()!=="service"&&!m)return h.error(`Quantity is required ${s.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!s[c].description&&!m)return h.error(`Description is required ${s.length>1?`in product form(s) ${c+1}`:""}`),!1;if(s[c].gst_requirement==="yes"&&s[c].paymentAndDelivery?.gstNumber&&!m){const L=s[c].paymentAndDelivery.gstNumber.trim();if(!p.test(L))return h.error(`Invalid GST Number format in form ${s.length>1?`${c+1}`:""}. Must be 15 characters (Format: 22AAAAA0000A1Z5)`),!1}}else return h.error(`Title is required ${s.length>1?`in product form(s) ${c+1}`:""}`),!1;return!0},_=s=>{y.length>1&&(z(m=>m.filter(p=>p!==s)),$(m=>{const p={...m};return delete p[s],p}))},se=(s,m)=>{$(p=>({...p,[s]:m}))},Y=async(s,m)=>{if(!N){F(!0);return}if(!N?.firstName?.trim()||!N?.lastName?.trim()||!N?.email?.trim()||!N?.phone?.trim()){h.info("Please update your profile first before add the quotes"),d("/account");return}b(!!s);const p=Object.values(U),c=W(p,s);if(!c)return;if(c&&m){H(!0);return}const L=[],A=[];if(p.forEach((t,a)=>{(!t.title||!t.description||!t.subCategoryId)&&L.push(a+1)}),L.length>0&&!s){let t=`Please fill required fields:
`;L.forEach(({formNumber:a,missingFields:i})=>{t+=`Form ${a}: ${i.join(", ")}
`}),A.length>0&&(t+=`
Image is required for form(s): ${A.join(", ")}`),h.error(t);return}const R=$e(u),ae=p.length>1;try{if(ae){const t=new FormData,a=[];for(const[i,g]of p.entries()){if(g.quantity){const v=g.quantity.toString().trim();if(!/^\d+$/.test(v)||parseInt(v)<1){h.error(`Invalid Quantity in Form ${i+1}`);return}}if(g.minimumBudget){const v=g.minimumBudget.toString().trim();if(!/^\d+$/.test(v)||parseInt(v)<1){h.error(`Invalid Budget range in Form ${i+1}`);return}}const X={};R.forEach(v=>{if(v==="image"||v==="document"||(v==="oldProductValue"||v==="productCondition")&&g.productType!=="old_product")return;const J=g[v];J!=null?typeof J=="object"?X[v]=JSON.stringify(J):X[v]=J:X[v]=""}),a.push(X),g.image&&R.includes("image")&&t.append("image",g.image),g.document&&R.includes("document")&&t.append("document",g.document)}t.append("products",JSON.stringify(a)),t.append("draft",s?"true":"false"),t.append("bidActiveDuration",o?o.toString():"0"),await S(n,p[0].subCategoryId||q,t,!0)}else{const t=p[0];console.log(t);const a=new FormData;if(t.quantity){const i=t.quantity.toString().trim();if(!/^\d+$/.test(i)||parseInt(i)<1){h.error("Invalid Quantity");return}}if(t.minimumBudget){const i=t.minimumBudget.toString().trim();if(!/^\d+$/.test(i)||parseInt(i)<1){h.error("Invalid Budget range");return}}R.forEach(i=>{if(i==="image"||i==="document"||(i==="oldProductValue"||i==="productCondition")&&t.productType!=="old_product")return;const g=t[i];g!=null?typeof g=="object"?a.append(i,JSON.stringify(g)):a.append(i,g):a.append(i,"")}),t.image&&R.includes("image")&&a.append("image",t.image),t.document&&R.includes("document")&&a.append("document",t.document),a.append("draft",s?"true":"false"),a.append("bidActiveDuration",o?o.toString():"0"),await S(n,t.subCategoryId||q,a,!1)}h.success(`${p.length} product form(s) ${s?"saved as draft":"submitted"} successfully!`),T(!0),setTimeout(()=>{z([0]),$({}),T(!1)},100)}catch(t){console.error("Error submitting forms:",t),h.error(`Failed to ${s?"save draft":"submit forms"}. Please try again.`)}};return l.useEffect(()=>{x&&(D||d("/"),window.location.reload())},[x]),e.jsxs(e.Fragment,{children:[e.jsx(be,{setOpen:F,open:Z}),e.jsx(He,{buttonType:D,loading:w,open:M,setOpen:H,setBidDuration:f,bidDuration:o,createProductFn:Y}),e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4",children:[e.jsx("div",{className:"flex flex-row sm:justify-between justify-end items-center gap-3 mb-6",children:e.jsx(ve,{className:"sm:block hidden",children:e.jsx(Ne,{children:e.jsxs(we,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>d(-1),children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx(ie,{className:"capitalize font-semibold text-gray-500",children:"Selected Product"}),e.jsx(Se,{}),e.jsx(ie,{className:"capitalize font-semibold text-orange-600",children:u==="beauty"?"Personal Care":u==="electronics"?"Mobile, Tablet and Wearables":u==="sports"?"Sports & Stationery":u==="home"?"Home Appliances":u==="industrial"?"Industrial & Construction Material":u==="furniture"?"furniture and decor":u})]})})})}),e.jsx("div",{className:"space-y-6",children:y.map((s,m)=>e.jsxs(e.Fragment,{children:[e.jsx(Ke,{formIndex:s,currentCategoryName:u,catByIdData:E,subCategroies:k,subCategoriesData:Q,onFormDataChange:se,onRemoveForm:_,showRemoveButton:m>0,resetForm:K,subCategoryId:q},s),y.length>-1&&m<y.length-1&&e.jsx("div",{className:"bg-gray-400 w-full h-[2px] my-5"})]}))}),e.jsxs("div",{className:"flex justify-end gap-3 my-5",children:[e.jsx(ee,{type:"button",variant:"outline",disabled:w,className:"w-32 cursor-pointer border-[#2C3E50] ",onClick:()=>Y(!0),children:w&&D?e.jsx(ce,{className:"w-5 h-5 animate-spin"}):" Save as Draft"}),e.jsx(ee,{type:"button",disabled:w,className:"text-white w-32 cursor-pointer bc   border-primary-btn border-2",onClick:()=>Y(!1,!0),children:`Submit ${Object.keys(U).length>1?"All":""}`})]})]})]})};export{Xe as default};
