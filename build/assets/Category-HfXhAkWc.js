import{j as e,W as pe,Y as he,az as ge,Z as xe,aC as fe,U as j,B as ee,f as me,t as h,a as be,au as je,r as l,u as ce,p as ye,av as ve,g as we,F as Ne,I as Ce,aw as Se,ay as Fe,K as ie,X as oe,ax as De}from"./index-nRz7PDd4.js";import{B as Te,a as Ae,b as Pe,c as de,d as Ie}from"./breadcrumb-gFg8juDx.js";import{S as B,a as V,b as k,c as q,d as a,D as Be}from"./DatePicker-DKzNGpRI.js";import{l as Ve}from"./index-CHCx9Z45.js";import{o as ke,s as qe,c as Me,b as $e,f as Ee,a as Re,h as Oe,e as _e,d as Le,v as ze,g as Ue,S as Qe,C as Ge,I as ue,F as Ze}from"./imageSizer-D-xJSuCj.js";import{T as He}from"./TooltipComp-eQaeTgpE.js";import{M as Ke}from"./move-left-DmJWLqcQ.js";import{T as Ye}from"./trash-2-C9C2rXVf.js";import"./index-DwGfctKw.js";import"./index-CppV2h3m.js";import"./check-B8w4PIHT.js";import"./chevron-up-DirSqPcx.js";import"./calendar-days-u-qCTdjE.js";const Je=({open:d,setOpen:i,createProductFn:M,bidDuration:$,setBidDuration:L,loading:y,buttonType:z})=>{async function U(f){f.preventDefault();const N=Number(f.currentTarget?.bidDuration.value);if(N<=0){h.error("Quote duration must be greater than 0");return}L(N),$&&(await M(!1),i(!1))}function E(f){const N=f.currentTarget.value.replace(/\D/g,"");L(Number(N))}function D(f){console.log(f.key),f.key.toLowerCase()==="."&&f.preventDefault()}return e.jsx(pe,{open:d,onOpenChange:i,children:e.jsxs(he,{style:{maxWidth:"470px"},children:[e.jsxs(ge,{children:[e.jsx(xe,{className:"text-black text-3xl font-extrabold",children:"Place Requirement"}),e.jsxs(fe,{className:"text-sm text-gray-600",children:["How Long Should Your Requirement Remain Active?  ",e.jsx("small",{className:"italic",children:"(in Days)"})]})]}),e.jsx("form",{className:"py-2 max-w-md inline-block mb-0",onSubmit:f=>U(f),children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx(j,{type:"number",name:"bidDuration",placeholder:"Ex. 15",onKeyDown:D,value:$||void 0,className:"w-full py-5 rounded-md border border-gray-300",onChange:E}),e.jsx(ee,{disabled:$&&$<=0||y,type:"submit",className:"w-full rounded-sm py-5  text-white font-bold cursor-pointer",children:y&&!z?e.jsx(me,{className:"w-5 h-5 animate-spin"}):"Place Requirement "})]})})]})})},We={automobile:"automobileFormImage.png",fashion:"fashionFormImage.png",electronics:"electronicsFormImage.png",home:"homeapplianceFormImage.png",sports:"sportsFormImage.png",furniture:"furnitureFormImage.png",health:"healthFormImage.png",beauty:"beautyFormImage.png",service:"servicesFormImage.png",industrial:"constructionFormImage.png",others:"otherImage.webp"};function Xe(d){switch(d){case"automobile":return ze;case"fashion":return Le;case"electronics":return _e;case"home":return Oe;case"sports":return Re;case"furniture":return Ee;case"beauty":return $e;case"industrial":return Me;case"service":return qe;case"others":return ke;default:return[]}}const et=({formIndex:d,currentCategoryName:i,catByIdData:M,subCategroies:$,subCategoriesData:L,onFormDataChange:y,onRemoveForm:z,showRemoveButton:U=!1,resetForm:E=!1,subCategoryId:D})=>{const[f,N]=l.useState(void 0),[F,R]=l.useState([0,2]),[u,Q]=l.useState(null),[C,H]=l.useState(null),[T,K]=l.useState(""),[re,te]=l.useState([]),P=l.useRef(null),A=l.useRef(null),{watch:v,setValue:c,register:b,getValues:O,reset:Y}=Ce({resolver:Se(Fe),defaultValues:{title:"",quantity:"",subCategoryId:"",minimumBudget:"",productType:"",oldProductValue:{min:"",max:""},productCondition:"",image:"",document:"",description:"",paymentAndDelivery:{ex_deliveryDate:void 0,paymentMode:"",gstNumber:"",organizationName:"",organizationAddress:""},draft:!1,gst_requirement:"",brand:"",additionalDeliveryAndPackage:"",gender:"",typeOfAccessories:"",fuelType:"",model:"",color:"",transmission:"",conditionOfProduct:"",toolType:"",rateAService:"",brandName:"",typeOfVehicle:"",typeOfProduct:""}}),J=v("gst_requirement"),_=v("productType"),ae=v("paymentAndDelivery.paymentMode"),ne=v("gender"),le=v("fuelType"),G=v("color"),s=v("transmission"),p=v("conditionOfProduct"),S=v("toolType");v("rateAService");const[r,Z]=l.useState("");l.useEffect(()=>{const t=v(()=>{const o={...O(),image:u,document:C,formIndex:d};y(d,o)});return()=>t.unsubscribe()},[v,u,C,d,y,O]),l.useEffect(()=>{c("oldProductValue.min",F[0].toString()),c("oldProductValue.max",F[1].toString())},[F,c]),l.useEffect(()=>{c("brand",T)},[T,c]),l.useEffect(()=>{E&&(Y(),N(void 0),R([0,2]),Q(null),H(null),K(""),te([]),P.current&&(P.current.value=""),A.current&&(A.current.value=""))},[E,Y]);function W(){if(D){const t=M?.subCategories.find(I=>I._id===D)?.name||"N/A",o=L.find(I=>I.category.replace(/\s+/g,"").toLowerCase()===t.replace(/\s+/g,"").toLowerCase())?.brands;Z(t),o?.length>0&&te(o),c("subCategoryId",D)}}return l.useEffect(()=>{W()},[D,M,L]),l.useEffect(()=>{T!=="other"&&c("brandName","")},[T]),e.jsxs("div",{className:" relative",children:[U&&e.jsx(ee,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-10 cursor-pointer",onClick:()=>z(d),children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 lg:col-span-1 bg-transparent  border-0 p-6 xs:grid xs:grid-cols-2 gap-6 space-y-4",children:[e.jsxs("div",{className:"col-span-1 align-center sm:block flex flex-col justify-center",children:[e.jsx("h2",{className:"text-[15px] font-semibold mb-2 text-center",children:"Tell us about your need"}),e.jsx("p",{className:"text-[13px] text-muted-foreground text-center",children:"Please help us tailor the experience by filling out the form below. If this isn't the category you meant to choose, you can go back and select another one."})]}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx("img",{src:"/categoryFormImages/"+We[i],alt:"",loading:"lazy",className:"m-auto w-full"})})]}),e.jsxs("div",{className:"col-span-2 md:col-span-2 flex flex-col gap-3",children:[e.jsx("div",{className:" rounded-[5px] p-6  bg-gray-200/50",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(j,{type:"text",placeholder:"Title* (Give a short title for your post - specify your required product in 3–4 words)",className:"bg-white col-span-1 md:col-span-3",...b("title")}),e.jsxs(B,{defaultValue:D,disabled:!0,children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Category*"})}),e.jsx(q,{children:$.map(t=>e.jsx(a,{value:t._id,children:t.name},t._id))})]}),i!=="service"&&i!=="others"&&e.jsx(Qe,{setValue:K,value:T,className:"w-full",dropdownTitle:"Brands*",renderItems:re}),i==="others"&&e.jsx(j,{type:"text",placeholder:"Brand Name...",value:T,onChange:t=>{K(t.target.value)},className:"bg-white"}),i!=="others"&&T==="others"&&e.jsx(j,{type:"text",placeholder:"Specific Brand Name...",...b("brandName"),className:"bg-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"absolute top-1/2 left-2 text-sm  text-orange-600 font-semibold -translate-y-1/2",children:"₹"}),e.jsx(j,{type:"text",placeholder:"Enter a Budget range",...b("minimumBudget"),className:"bg-white  pl-5"})]}),i!=="service"&&e.jsx(j,{type:"string",placeholder:"Quantity*",...b("quantity"),className:"bg-white col-span-1"}),i==="fashion"&&e.jsxs(B,{value:ne,onValueChange:t=>c("gender",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Gender"})}),e.jsxs(q,{children:[e.jsx(a,{value:"male",children:"Male"}),e.jsx(a,{value:"female",children:"Female"}),e.jsx(a,{value:"kids",children:"Kids"})]})]}),i==="automobile"&&!["accessories","bicycles"].includes(r.toLowerCase())&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{value:le,onValueChange:t=>c("fuelType",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Fuel Type"})}),e.jsxs(q,{children:[e.jsx(a,{value:"petrol",children:"Petrol"}),e.jsx(a,{value:"electric",children:"Diesel"}),e.jsx(a,{value:"cng",children:"CNG"}),e.jsx(a,{value:"hybrid",children:"Hybrid"}),e.jsx(a,{value:"electric",children:"Electric"}),e.jsx(a,{value:"electric",children:"LPG"})]})]}),!r.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Model",...b("model"),className:"bg-white col-span-1"}),!r.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Color",value:G,onChange:t=>{c("color",t.target.value)}}),!["scooters","accessories","bicycles"].includes(r.toLowerCase())&&e.jsxs(B,{value:s,onValueChange:t=>c("transmission",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Transmission"})}),e.jsxs(q,{children:[e.jsx(a,{value:"automatic",children:"Automatic"}),e.jsx(a,{value:"manual",children:"Manual"})]})]})]}),r.toLowerCase()==="mobile"&&e.jsx(j,{type:"text",placeholder:"Model",...b("model"),className:"bg-white col-span-1"}),(i==="furniture"||i==="sports"||i==="automobile"||i==="home"||i==="electronics")&&i!=="service"&&i!=="others"&&e.jsxs(e.Fragment,{children:[(_==="new_product"||_==="")&&e.jsxs(B,{value:_,onValueChange:t=>c("productType",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Product Condition"})}),e.jsxs(q,{children:[e.jsx(a,{value:"new_product",children:"New Product"}),e.jsx(a,{value:"old_product",children:"Old Product"})]})]}),_==="old_product"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full max-w-md border-[1.5px] border-gray-200 rounded-lg bg-white p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs(ie,{className:"font-medium text-gray-500 ",children:["Old Product ",e.jsx("sup",{className:"hidden sm:block",children:"(in Years)"})]}),e.jsx(oe,{className:"w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>c("productType","new_product")})]}),e.jsx(Ve.Range,{values:F,step:.1,min:0,max:20,onChange:t=>R(t),renderTrack:({props:t,children:o})=>e.jsxs("div",{...t,className:"h-1 w-full bg-gray-300 rounded relative",children:[e.jsx("div",{className:"absolute h-1 bg-orange-600 rounded",style:{left:`${F[0]/20*100}%`,width:`${(F[1]-F[0])/20*100}%`}}),o]}),renderThumb:({props:t})=>e.jsx("div",{...t,className:"w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center shadow"})}),e.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-gray-600 text-sm hidden sm:block",children:"Min."}),e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:F[0].toString().padStart(2,"0")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:F[1]}),e.jsx(ie,{className:"text-gray-600 text-sm hidden sm:block",children:"Max."})]})]})]})})]}),i==="others"&&e.jsx(e.Fragment,{children:e.jsx(j,{type:"text",placeholder:"Product Condition",...b("productCondition"),className:"bg-white"})}),_==="new_product"&&i==="furniture"&&e.jsxs(B,{value:p,onValueChange:t=>c("conditionOfProduct",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Product Condition"})}),e.jsxs(q,{children:[e.jsx(a,{value:"new",children:"New"}),e.jsx(a,{value:"like_new",children:"Like New"}),e.jsx(a,{value:"excellent",children:"Excellent"}),e.jsx(a,{value:"good",children:"Good"}),e.jsx(a,{value:"fair",children:"Fair"}),e.jsx(a,{value:"poor",children:"Poor"}),e.jsx(a,{value:"for_parts_or_repair",children:"For Parts Or Repair"}),e.jsx(a,{value:"refurbished",children:"Refurbished"}),e.jsx(a,{value:"vintage",children:"Vintage (Used)"}),e.jsx(a,{value:"antique",children:"Antique"})]})]}),r==="Commercial and other Vehicle"&&i==="automobile"&&e.jsx(j,{type:"text",placeholder:"Type of Vehicle",...b("typeOfVehicle"),className:"bg-white"}),e.jsx(j,{type:"text",placeholder:i==="service"?"Service Type":"Product Type",...b("typeOfProduct"),className:"bg-white"}),i==="industrial"&&e.jsxs(B,{value:S,onValueChange:t=>c("toolType",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Tool Type"})}),e.jsxs(q,{children:[e.jsx(a,{value:"industrial_tool",children:"Industrial Tool"}),e.jsx(a,{value:"machinery_tool",children:"Machinery Type"})]})]})]})}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold  text-gray-700",children:"Other Details"}),e.jsx("sup",{className:"italic text-gray-500",children:"Product Image and document are not mandatory."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{onClick:()=>P?.current?.click(),className:"border-2 border-dashed relative border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer h-32",children:[e.jsx(Ge,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsx("span",{className:"text-sm text-muted-foreground font-semibold",children:"Upload Image"}),e.jsx("p",{className:"text-xs text-gray-500 ",children:"to upload your image (max 2 MB)"}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:P,onChange:t=>{if(t.target.files?.[0]){const o=t.target.files[0];if(o.size>2*1024*1024){h.info("Image size should not exceed 2MB");return}Q(o);const I={...O(),image:o,document:C,formIndex:d};y(d,I)}}}),u&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:u?.name}),u&&e.jsxs("div",{className:"absolute h-16 w-16 right-2 top-2 rounded-lg shadow select-none z-10 group",onMouseEnter:t=>ue(t.currentTarget.querySelector("img")),onMouseLeave:t=>ue(t.currentTarget.querySelector("img")),children:[e.jsx("img",{src:URL.createObjectURL(u),className:"h-full w-full bg-white object-contain imageSizer rounded-sm",alt:""}),e.jsx("div",{className:"absolute inset-0 bg-black/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200  flex items-center justify-center cursor-pointer rounded-lg",onClick:t=>{t.stopPropagation(),Q(null),P.current&&(P.current.value="");const o={...O(),image:null,document:C,formIndex:d};y(d,o)},children:e.jsx(oe,{className:"h-6 w-6 text-white"})})]})]}),e.jsxs("div",{onClick:()=>A.current?.click(),className:"border-2 border-dashed relative border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer",children:[e.jsx(Ze,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground text-center ",children:[e.jsx("span",{className:"font-semibold",children:"Browse From Device"})," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"to upload your doc/pdf (max 5 MB)"})]}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",hidden:!0,ref:A,onChange:t=>{if(t.target.files?.[0]){const o=t.target.files[0];if(o.size===0){h.error("Invalid Doc");return}if(o.size>5*1024*1024){h.info("Document size should not exceed 5MB");return}H(o);const I={...O(),image:u,document:o,formIndex:d};y(d,I)}}}),C&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:C.name}),C&&e.jsx("div",{className:"absolute top-2 right-2 z-10 bg-orange-100 text-orange-500 rounded-sm  p-1 cursor-pointer",onClick:t=>{t.stopPropagation(),H(null),A.current&&(A.current.value="");const o={...O(),image:u,document:null,formIndex:d};y(d,o)},children:e.jsx(He,{hoverChildren:e.jsx(oe,{className:"h-4 w-4"}),contentChildren:e.jsx("p",{children:"Remove Doc"})})})]})]}),e.jsx(De,{placeholder:"Description*",...b("description"),className:"bg-white min-h-24"})]}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Payment & Delivery Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(Be,{date:f,title:"Delivery Date",disabledBeforeDate:new Date(new Date().getTime()),setDate:t=>{t&&(N(t),c("paymentAndDelivery.ex_deliveryDate",t))}}),e.jsxs(B,{value:ae,onValueChange:t=>c("paymentAndDelivery.paymentMode",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"Payment Mode"})}),e.jsxs(q,{children:[e.jsx(a,{value:"cash",children:"Cash"}),e.jsx(a,{value:"card",children:"Banking or Online mode"}),e.jsx(a,{value:"upi",children:"Any"})]})]}),e.jsxs(B,{value:J,onValueChange:t=>c("gst_requirement",t),children:[e.jsx(V,{className:"w-full bg-white",children:e.jsx(k,{placeholder:"GST Input Required"})}),e.jsxs(q,{children:[e.jsx(a,{value:"yes",children:"Yes"}),e.jsx(a,{value:"no",children:"No"})]})]}),J==="yes"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{type:"text",placeholder:"GST Number (15 characters - Format: 22AAAAA0000A1Z5)",...b("paymentAndDelivery.gstNumber"),className:"bg-white",maxLength:15,onChange:t=>{const o=t.target.value.toUpperCase();c("paymentAndDelivery.gstNumber",o,{shouldValidate:!0})}}),e.jsx(j,{type:"text",placeholder:"Enity Name",...b("paymentAndDelivery.organizationName"),className:"bg-white"}),e.jsx(j,{type:"text",placeholder:"Entity Address",...b("paymentAndDelivery.organizationAddress"),className:"bg-white"})]})]})]})]})]})]})},ht=()=>{const d=be(),{categoryId:i,subCategoryId:M}=je(),[$,L]=l.useState([]),[y,z]=l.useState([0]),[U,E]=l.useState({}),{fn:D,data:f,loading:N}=ce(ye.addProduct),{fn:F,data:R}=ce(ve.getCategoriesById),[u,Q]=l.useState(null);let{user:C}=we();const[H,T]=l.useState(!1),[K,re]=l.useState([]),[te,P]=l.useState(!1),[A,v]=l.useState(null),[c,b]=l.useState(void 0),[O,Y]=l.useState(!1),[J,_]=l.useState(!1);l.useEffect(()=>{(async()=>await F(i))()},[i]),l.useEffect(()=>{if(R){try{const s=decodeURIComponent(R?.categoryName).toLowerCase();re(Xe(s)),Q(s||null)}catch(s){console.error("Error decoding category name:",s),Q(null)}L(R?.subCategories||[])}},[R]);const ae=(s,p)=>{const S=/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/;for(let r=0;r<s.length;r++)if(s[r].title){if(!s[r].subCategoryId&&!p)return h.error(`Category is required ${s.length>1?`in product form(s) ${r+1}`:""}`),!1;if(!s[r].brand&&u?.toLowerCase()!=="service"&&!p)return h.error(`Brand is required ${s.length>1?`in product form(s) ${r+1}`:""}`),!1;if(!s[r].quantity&&u?.toLowerCase()!=="service"&&!p)return h.error(`Quantity is required ${s.length>1?`in product form(s) ${r+1}`:""}`),!1;if(!s[r].description&&!p)return h.error(`Description is required ${s.length>1?`in product form(s) ${r+1}`:""}`),!1;if(s[r].gst_requirement==="yes"&&s[r].paymentAndDelivery?.gstNumber&&!p){const Z=s[r].paymentAndDelivery.gstNumber.trim();if(!S.test(Z))return h.error(`Invalid GST Number format in form ${s.length>1?`${r+1}`:""}. Must be 15 characters (Format: 22AAAAA0000A1Z5)`),!1}}else return h.error(`Title is required ${s.length>1?`in product form(s) ${r+1}`:""}`),!1;return!0},ne=s=>{y.length>1&&(z(p=>p.filter(S=>S!==s)),E(p=>{const S={...p};return delete S[s],S}))},le=(s,p)=>{E(S=>({...S,[s]:p}))},G=async(s,p,S)=>{if(!C){T(!0);return}if(!C?.firstName?.trim()||!C?.lastName?.trim()||!C?.email?.trim()||!C?.phone?.trim()){h.info("Please update your profile first before add the quotes"),d("/account");return}v(!!s);const r=Object.values(U),Z=ae(r,s);if(!Z)return;if(Z&&p){_(S||!1),Y(!0);return}const W=[],t=[];if(r.forEach((n,g)=>{(!n.title||!n.description||!n.subCategoryId)&&W.push(g+1)}),W.length>0&&!s){let n=`Please fill required fields:
`;W.forEach(({formNumber:g,missingFields:m})=>{n+=`Form ${g}: ${m.join(", ")}
`}),t.length>0&&(n+=`
Image is required for form(s): ${t.join(", ")}`),h.error(n);return}const o=Ue(u),I=r.length>1;try{if(I){const n=new FormData,g=[];for(const[m,x]of r.entries()){if(x.quantity){const w=x.quantity.toString().trim();if(!/^\d+$/.test(w)||parseInt(w)<1){h.error(`Invalid Quantity in Form ${m+1}`);return}}if(x.minimumBudget){const w=x.minimumBudget.toString().trim();if(!/^\d+$/.test(w)||parseInt(w)<1){h.error(`Invalid Budget range in Form ${m+1}`);return}}const se={};o.forEach(w=>{if(w==="image"||w==="document"||(w==="oldProductValue"||w==="productCondition")&&x.productType!=="old_product")return;const X=x[w];X!=null?typeof X=="object"?se[w]=JSON.stringify(X):se[w]=X:se[w]=""}),g.push(se),x.image&&o.includes("image")&&n.append("image",x.image),x.document&&o.includes("document")&&n.append("document",x.document)}n.append("products",JSON.stringify(g)),n.append("draft",s?"true":"false"),n.append("bidActiveDuration",c?c.toString():"0"),n.append("isMergeQuote",J?"true":"false"),await D(i,r[0].subCategoryId||M,n,!0)}else{const n=r[0];console.log(n);const g=new FormData;if(n.quantity){const m=n.quantity.toString().trim();if(!/^\d+$/.test(m)||parseInt(m)<1){h.error("Invalid Quantity");return}}if(n.minimumBudget){const m=n.minimumBudget.toString().trim();if(!/^\d+$/.test(m)||parseInt(m)<1){h.error("Invalid Budget range");return}}o.forEach(m=>{if(m==="image"||m==="document"||(m==="oldProductValue"||m==="productCondition")&&n.productType!=="old_product")return;const x=n[m];x!=null?typeof x=="object"?g.append(m,JSON.stringify(x)):g.append(m,x):g.append(m,"")}),n.image&&o.includes("image")&&g.append("image",n.image),n.document&&o.includes("document")&&g.append("document",n.document),g.append("draft",s?"true":"false"),g.append("bidActiveDuration",c?c.toString():"0"),g.append("isMergeQuote",J?"true":"false"),await D(i,n.subCategoryId||M,g,!1)}h.success(`${r.length} product form(s) ${s?"saved as draft":"submitted"} successfully!`),P(!0),setTimeout(()=>{z([0]),E({}),P(!1),_(!1)},100)}catch(n){console.error("Error submitting forms:",n),h.error(`Failed to ${s?"save draft":"submit forms"}. Please try again.`)}};return l.useEffect(()=>{f&&(A||d("/"),window.location.reload())},[f]),e.jsxs(e.Fragment,{children:[e.jsx(Ne,{setOpen:T,open:H}),e.jsx(Je,{buttonType:A,loading:N,open:O,setOpen:Y,setBidDuration:b,bidDuration:c,createProductFn:G}),e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4",children:[e.jsx("div",{className:"flex flex-row sm:justify-between justify-end items-center gap-3 mb-6",children:e.jsx(Te,{className:"sm:block hidden",children:e.jsx(Ae,{children:e.jsxs(Pe,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>d(-1),children:[e.jsx(Ke,{className:"h-4 w-4"}),e.jsx(de,{className:"capitalize font-semibold text-gray-500",children:"Selected Product"}),e.jsx(Ie,{}),e.jsx(de,{className:"capitalize font-semibold text-orange-600",children:u==="beauty"?"Personal Care":u==="electronics"?"Mobile, Tablet and Wearables":u==="sports"?"Sports & Stationery":u==="home"?"Home Appliances":u==="industrial"?"Industrial & Construction Material":u==="furniture"?"furniture and decor":u})]})})})}),e.jsx("div",{className:"space-y-6",children:y.map((s,p)=>e.jsxs(e.Fragment,{children:[e.jsx(et,{formIndex:s,currentCategoryName:u,catByIdData:R,subCategroies:$,subCategoriesData:K,onFormDataChange:le,onRemoveForm:ne,showRemoveButton:p>0,resetForm:te,subCategoryId:M},s),y.length>-1&&p<y.length-1&&e.jsx("div",{className:"bg-gray-400 w-full h-[2px] my-5"})]}))}),e.jsxs("div",{className:"flex justify-end gap-3 my-5",children:[e.jsx(ee,{type:"button",variant:"outline",disabled:N,className:"w-32 cursor-pointer border-[#2C3E50] ",onClick:()=>G(!0),children:N&&A?e.jsx(me,{className:"w-5 h-5 animate-spin"}):" Save as Draft"}),e.jsx(ee,{type:"button",disabled:N,className:"text-white w-32 cursor-pointer bc   border-primary-btn border-2",onClick:()=>G(!1,!0,!0),children:"Merge Quote"}),e.jsx(ee,{type:"button",disabled:N,className:"text-white w-32 cursor-pointer bc   border-primary-btn border-2",onClick:()=>G(!1,!0),children:`Submit ${Object.keys(U).length>1?"All":""}`})]})]})]})};export{ht as default};
