import{j as e,D as de,a as ue,b as me,d as he,N as pe,I as j,B as J,i as ce,t as h,o as ge,O as xe,r as l,l as le,p as fe,P as je,k as be,A as ye,v as ve,w as we,x as Ne,Q as Se,z as ie,y as Ce,R as Fe,T as Ae,U as De,V as Pe,W as Te,X as Ie,Y as Ve,Z as Be,_ as ke,$ as qe,a0 as $e,a1 as Ee,q as Oe,s as Re,a2 as _e,a3 as Me,S as F,e as A,f as D,g as P,h as a,a4 as Le,L as ne,a5 as ze,a6 as Ue,a7 as Ge,a8 as oe,a9 as Ze,aa as He,J as Qe}from"./index-DNb3nF8L.js";const Ye=({open:g,setOpen:n,createProductFn:I,bidDuration:V,setBidDuration:E,loading:b,buttonType:O})=>{async function R(x){x.preventDefault();const w=Number(x.currentTarget?.bidDuration.value);if(w<=0){h.error("Bid duration must be greater than 0");return}E(w),V&&(await I(!1),n(!1))}function B(x){const w=x.currentTarget.value.replace(/\D/g,"");E(Number(w))}function S(x){console.log(x.key),x.key.toLowerCase()==="."&&x.preventDefault()}return e.jsx(de,{open:g,onOpenChange:n,children:e.jsxs(ue,{style:{maxWidth:"470px"},children:[e.jsxs(me,{children:[e.jsx(he,{className:"text-black text-3xl font-extrabold",children:"Place Requirement"}),e.jsxs(pe,{className:"text-sm text-gray-600",children:["How Long Should Your Requirement Remain Active?  ",e.jsx("small",{className:"italic",children:"(in Days)"})]})]}),e.jsx("form",{className:"py-2 max-w-md inline-block mb-0",onSubmit:x=>R(x),children:e.jsxs("div",{className:"space-y-4 w-full",children:[e.jsx(j,{type:"number",name:"bidDuration",placeholder:"Ex. 15",onKeyDown:S,value:V||void 0,className:"w-full py-5 rounded-md border border-gray-300",onChange:B}),e.jsx(J,{disabled:V&&V<=0||b,type:"submit",className:"w-full rounded-sm py-5  text-white font-bold cursor-pointer",children:b&&!O?e.jsx(ce,{className:"w-5 h-5 animate-spin"}):"Place Requirement "})]})})]})})},Je={automobile:"automobileFormImage.png",fashion:"fashionFormImage.png",electronics:"electronicsFormImage.png",home:"homeapplianceFormImage.png",sports:"sportsFormImage.png",furniture:"furnitureFormImage.png",health:"healthFormImage.png",beauty:"beautyFormImage.png",service:"servicesFormImage.png",industrial:"constructionFormImage.png",others:"otherImage.webp"};function Ke(g){switch(g){case"automobile":return $e;case"fashion":return qe;case"electronics":return ke;case"home":return Be;case"sports":return Ve;case"furniture":return Ie;case"beauty":return Te;case"industrial":return Pe;case"service":return De;case"others":return Ae;default:return[]}}const We=({formIndex:g,currentCategoryName:n,catByIdData:I,subCategroies:V,subCategoriesData:E,onFormDataChange:b,onRemoveForm:O,showRemoveButton:R=!1,resetForm:B=!1,subCategoryId:S})=>{const[x,w]=l.useState(void 0),[N,k]=l.useState([0,2]),[m,G]=l.useState(null),[_,K]=l.useState(null),[C,Z]=l.useState(""),[se,W]=l.useState([]),M=l.useRef(null),q=l.useRef(null),{watch:y,setValue:o,register:f,getValues:U,reset:H}=Oe({resolver:Re(_e),defaultValues:{title:"",quantity:"",subCategoryId:"",minimumBudget:"",productType:"",oldProductValue:{min:"",max:""},productCondition:"",image:"",document:"",description:"",paymentAndDelivery:{ex_deliveryDate:void 0,paymentMode:"",gstNumber:"",organizationName:"",organizationAddress:""},draft:!1,gst_requirement:"",brand:"",additionalDeliveryAndPackage:"",gender:"",typeOfAccessories:"",fuelType:"",model:"",color:"",transmission:"",conditionOfProduct:"",toolType:"",rateAService:"",brandName:"",typeOfVehicle:"",typeOfProduct:""}}),X=y("gst_requirement"),L=y("productType"),te=y("paymentAndDelivery.paymentMode"),ae=y("gender"),Q=y("fuelType"),t=y("color"),d=y("transmission"),u=y("conditionOfProduct"),c=y("toolType"),z=y("rateAService"),[T,$]=l.useState("");l.useEffect(()=>{const s=y(()=>{const r={...U(),image:m,document:_,formIndex:g};b(g,r)});return()=>s.unsubscribe()},[y,m,_,g,b,U]),l.useEffect(()=>{o("oldProductValue.min",N[0].toString()),o("oldProductValue.max",N[1].toString())},[N,o]),l.useEffect(()=>{o("brand",C)},[C,o]),l.useEffect(()=>{B&&(H(),w(void 0),k([0,2]),G(null),K(null),Z(""),W([]),M.current&&(M.current.value=""),q.current&&(q.current.value=""))},[B,H]);function re(){if(S){const s=I?.subCategories.find(i=>i._id===S)?.name||"N/A",r=E.find(i=>i.category.replace(/\s+/g,"").toLowerCase()===s.replace(/\s+/g,"").toLowerCase())?.brands;$(s),r?.length>0&&W(r),o("subCategoryId",S)}}return l.useEffect(()=>{re()},[S,I,E]),l.useEffect(()=>{C!=="other"&&o("brandName","")},[C]),e.jsxs("div",{className:" relative",children:[R&&e.jsx(J,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 z-10 cursor-pointer",onClick:()=>O(g),children:e.jsx(Me,{className:"h-4 w-4"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 lg:col-span-1 bg-transparent  border-0 p-6 xs:grid xs:grid-cols-2 gap-6 space-y-4",children:[e.jsxs("div",{className:"col-span-1 align-center sm:block flex flex-col justify-center",children:[e.jsx("h2",{className:"text-[15px] font-semibold mb-2 text-center",children:"Tell us about your need"}),e.jsx("p",{className:"text-[13px] text-muted-foreground text-center",children:"Please help us tailor the experience by filling out the form below. If this isn't the category you meant to choose, you can go back and select another one."})]}),e.jsx("div",{className:"col-span-1 w-full",children:e.jsx("img",{src:"/categoryFormImages/"+Je[n],alt:"",loading:"lazy",className:"m-auto w-full"})})]}),e.jsxs("div",{className:"col-span-2 md:col-span-2 flex flex-col gap-3",children:[e.jsxs("div",{className:" rounded-[5px] p-6  bg-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Service Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(j,{type:"text",placeholder:"Title* (Give a short title for your post - specify your required product in 3–4 words)",className:"bg-white col-span-1 md:col-span-3",...f("title")}),e.jsxs(F,{defaultValue:S,disabled:!0,children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Category*"})}),e.jsx(P,{children:V.map(s=>e.jsx(a,{value:s._id,children:s.name},s._id))})]}),n!=="service"&&n!=="others"&&e.jsx(Le,{setValue:Z,value:C,className:"w-full",dropdownTitle:"Brands*",renderItems:se}),n==="others"&&e.jsx(j,{type:"text",placeholder:"Brand Name...",value:C,onChange:s=>{Z(s.target.value)},className:"bg-white"}),n!=="others"&&C==="others"&&e.jsx(j,{type:"text",placeholder:"Specific Brand Name...",...f("brandName"),className:"bg-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"absolute top-1/2 left-2 text-sm  text-orange-600 font-semibold -translate-y-1/2",children:"₹"}),e.jsx(j,{type:"text",placeholder:"Enter a Budget range",...f("minimumBudget"),className:"bg-white  pl-5"})]}),n!=="service"&&e.jsx(j,{type:"string",placeholder:"Quantity*",...f("quantity"),className:"bg-white col-span-1"}),n==="service"&&e.jsxs(F,{value:z,onValueChange:s=>o("rateAService",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Rate a Service"})}),e.jsxs(P,{children:[e.jsx(a,{value:"good",children:"Good"}),e.jsx(a,{value:"average",children:"Average"}),e.jsx(a,{value:"bad",children:"Bad"})]})]}),n==="fashion"&&e.jsxs(F,{value:ae,onValueChange:s=>o("gender",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Gender"})}),e.jsxs(P,{children:[e.jsx(a,{value:"male",children:"Male"}),e.jsx(a,{value:"female",children:"Female"}),e.jsx(a,{value:"kids",children:"Kids"})]})]}),n==="automobile"&&!["accessories","bicycles"].includes(T.toLowerCase())&&e.jsxs(e.Fragment,{children:[e.jsxs(F,{value:Q,onValueChange:s=>o("fuelType",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Fuel Type"})}),e.jsxs(P,{children:[e.jsx(a,{value:"petrol",children:"Petrol"}),e.jsx(a,{value:"electric",children:"Diesel"}),e.jsx(a,{value:"cng",children:"CNG"}),e.jsx(a,{value:"hybrid",children:"Hybrid"}),e.jsx(a,{value:"electric",children:"Electric"}),e.jsx(a,{value:"electric",children:"LPG"})]})]}),!T.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Model",...f("model"),className:"bg-white col-span-1"}),!T.toLowerCase().includes("accessories")&&e.jsx(j,{type:"text",placeholder:"Color",value:t,onChange:s=>{o("color",s.target.value)}}),!["scooters","accessories","bicycles"].includes(T.toLowerCase())&&e.jsxs(F,{value:d,onValueChange:s=>o("transmission",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Transmission"})}),e.jsxs(P,{children:[e.jsx(a,{value:"automatic",children:"Automatic"}),e.jsx(a,{value:"manual",children:"Manual"})]})]})]}),T.toLowerCase()==="mobile"&&e.jsx(j,{type:"text",placeholder:"Model",...f("model"),className:"bg-white col-span-1"}),(n==="furniture"||n==="sports"||n==="automobile"||n==="home"||n==="electronics")&&n!=="service"&&n!=="others"&&e.jsxs(e.Fragment,{children:[(L==="new_product"||L==="")&&e.jsxs(F,{value:L,onValueChange:s=>o("productType",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Product Condition"})}),e.jsxs(P,{children:[e.jsx(a,{value:"new_product",children:"New Product"}),e.jsx(a,{value:"old_product",children:"Old Product"})]})]}),L==="old_product"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full max-w-md border-[1.5px] border-gray-200 rounded-lg bg-white p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs(ne,{className:"font-medium text-gray-500 ",children:["Old Product ",e.jsx("sup",{className:"hidden sm:block",children:"(in Years)"})]}),e.jsx(ze,{className:"w-4 h-4 text-gray-400 cursor-pointer",onClick:()=>o("productType","new_product")})]}),e.jsx(Ue.Range,{values:N,step:.1,min:0,max:20,onChange:s=>k(s),renderTrack:({props:s,children:r})=>e.jsxs("div",{...s,className:"h-1 w-full bg-gray-300 rounded relative",children:[e.jsx("div",{className:"absolute h-1 bg-orange-600 rounded",style:{left:`${N[0]/20*100}%`,width:`${(N[1]-N[0])/20*100}%`}}),r]}),renderThumb:({props:s})=>e.jsx("div",{...s,className:"w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center shadow"})}),e.jsxs("div",{className:"flex justify-between items-center mt-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"text-gray-600 text-sm hidden sm:block",children:"Min."}),e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:N[0].toString().padStart(2,"0")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-1 border rounded px-2 py-1",children:N[1]}),e.jsx(ne,{className:"text-gray-600 text-sm hidden sm:block",children:"Max."})]})]})]})})]}),n==="others"&&e.jsx(e.Fragment,{children:e.jsx(j,{type:"text",placeholder:"Product Condition",...f("productCondition"),className:"bg-white"})}),L==="new_product"&&n==="furniture"&&e.jsxs(F,{value:u,onValueChange:s=>o("conditionOfProduct",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Product Condition"})}),e.jsxs(P,{children:[e.jsx(a,{value:"new",children:"New"}),e.jsx(a,{value:"like_new",children:"Like New"}),e.jsx(a,{value:"excellent",children:"Excellent"}),e.jsx(a,{value:"good",children:"Good"}),e.jsx(a,{value:"fair",children:"Fair"}),e.jsx(a,{value:"poor",children:"Poor"}),e.jsx(a,{value:"for_parts_or_repair",children:"For Parts Or Repair"}),e.jsx(a,{value:"refurbished",children:"Refurbished"}),e.jsx(a,{value:"vintage",children:"Vintage (Used)"}),e.jsx(a,{value:"antique",children:"Antique"})]})]}),T==="Commercial and other Vehicle"&&n==="automobile"&&e.jsx(j,{type:"text",placeholder:"Type of Vehicle",...f("typeOfVehicle"),className:"bg-white"}),n!=="automobile"&&e.jsx(j,{type:"text",placeholder:"Service Type",...f("typeOfProduct"),className:"bg-white"}),n==="industrial"&&e.jsxs(F,{value:c,onValueChange:s=>o("toolType",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Tool Type"})}),e.jsxs(P,{children:[e.jsx(a,{value:"industrial_tool",children:"Industrial Tool"}),e.jsx(a,{value:"machinery_tool",children:"Machinery Type"})]})]})]})]}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold  text-gray-700",children:"Other Details"}),e.jsx("sup",{className:"italic text-gray-500",children:"Product Image and document are not mendatory."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{onClick:()=>M?.current?.click(),className:"border-2 border-dashed relative border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer h-32",children:[e.jsx(Ge,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsx("span",{className:"text-sm text-muted-foreground font-semibold",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",hidden:!0,ref:M,onChange:s=>{if(s.target.files?.[0]){const r=s.target.files[0];if(r.size>2*1024*1024){h.info("Image size should not exceed 2MB");return}G(r);const i={...U(),image:r,document:_,formIndex:g};b(g,i)}}}),m&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:m?.name}),m&&e.jsx("div",{className:"absolute h-16 w-16 right-2 top-2 rounded-lg shadow  select-none z-10",children:e.jsx("img",{onMouseEnter:s=>oe(s.target),onMouseLeave:s=>oe(s.target),src:URL.createObjectURL(m),className:"h-full w-full bg-white object-contain imageSizer",alt:""})})]}),e.jsxs("div",{onClick:()=>q.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg flex bg-transparent flex-col items-center justify-center p-6 cursor-pointer",children:[e.jsx(Ze,{className:"h-6 w-6 mb-2 text-gray-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground text-center ",children:[e.jsx("span",{className:"font-semibold",children:"Browse From Device"})," ",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"(doc/pdf)"})]}),e.jsx("input",{type:"file",accept:".pdf,.doc,.docx",hidden:!0,ref:q,onChange:s=>{if(s.target.files?.[0]){const r=s.target.files[0];if(r.size===0){h.error("Invalid Doc");return}if(r.size>5*1024*1024){h.info("Document size should not exceed 5MB");return}K(r);const i={...U(),image:m,document:r,formIndex:g};b(g,i)}}}),_&&e.jsx("p",{className:"text-xs mt-2 text-green-600",children:_.name})]})]}),e.jsx(He,{placeholder:"Description*",...f("description"),className:"bg-white min-h-24"})]}),e.jsxs("div",{className:"rounded-[5px] p-6  bg-gray-200/50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"Payment & Delivery Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[e.jsx(Qe,{date:x,title:"Delivery Date",disabledBeforeDate:new Date(new Date().getTime()),setDate:s=>{s&&(w(s),o("paymentAndDelivery.ex_deliveryDate",s))}}),e.jsxs(F,{value:te,onValueChange:s=>o("paymentAndDelivery.paymentMode",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"Payment Mode"})}),e.jsxs(P,{children:[e.jsx(a,{value:"cash",children:"Cash"}),e.jsx(a,{value:"card",children:"Banking or Online mode"}),e.jsx(a,{value:"upi",children:"Any"})]})]}),e.jsxs(F,{value:X,onValueChange:s=>o("gst_requirement",s),children:[e.jsx(A,{className:"w-full bg-white",children:e.jsx(D,{placeholder:"GST Input Required"})}),e.jsxs(P,{children:[e.jsx(a,{value:"yes",children:"Yes"}),e.jsx(a,{value:"no",children:"No"})]})]}),X==="yes"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{type:"text",placeholder:"GST Number (15 characters - Format: 22AAAAA0000A1Z5)",...f("paymentAndDelivery.gstNumber"),className:"bg-white",maxLength:15,onChange:s=>{const r=s.target.value.toUpperCase();o("paymentAndDelivery.gstNumber",r,{shouldValidate:!0})}}),e.jsx(j,{type:"text",placeholder:"Enity Name",...f("paymentAndDelivery.organizationName"),className:"bg-white"}),e.jsx(j,{type:"text",placeholder:"Entity Address",...f("paymentAndDelivery.organizationAddress"),className:"bg-white"})]})]})]})]})]})]})},es=()=>{const g=ge(),{categoryId:n,subCategoryId:I}=xe(),[V,E]=l.useState([]),[b,O]=l.useState([0]),[R,B]=l.useState({}),{fn:S,data:x,loading:w}=le(fe.addProduct),{fn:N,data:k}=le(je.getCategoriesById),[m,G]=l.useState(null);let{user:_}=be();const[K,C]=l.useState(!1),[Z,se]=l.useState([]),[W,M]=l.useState(!1),[q,y]=l.useState(null),[o,f]=l.useState(void 0),[U,H]=l.useState(!1);l.useEffect(()=>{(async()=>await N(n))()},[n]),l.useEffect(()=>{if(k){try{const t=decodeURIComponent(k?.categoryName).toLowerCase();se(Ke(t)),G(t||null)}catch(t){console.error("Error decoding category name:",t),G(null)}E(k?.subCategories||[])}},[k]);const X=(t,d)=>{const u=/^\d{2}[A-Z]{5}\d{4}[A-Z]{1}[A-Z\d]{1}[Z]{1}[A-Z\d]{1}$/;for(let c=0;c<t.length;c++)if(t[c].title){if(!t[c].subCategoryId&&!d)return h.error(`Category is required ${t.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!t[c].brand&&m?.toLowerCase()!=="service"&&!d)return h.error(`Brand is required ${t.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!t[c].quantity&&m?.toLowerCase()!=="service"&&!d)return h.error(`Quantity is required ${t.length>1?`in product form(s) ${c+1}`:""}`),!1;if(!t[c].description&&!d)return h.error(`Description is required ${t.length>1?`in product form(s) ${c+1}`:""}`),!1;if(t[c].gst_requirement==="yes"&&t[c].paymentAndDelivery?.gstNumber&&!d){const z=t[c].paymentAndDelivery.gstNumber.trim();if(!u.test(z))return h.error(`Invalid GST Number format in form ${t.length>1?`${c+1}`:""}. Must be 15 characters (Format: 22AAAAA0000A1Z5)`),!1}}else return h.error(`Title is required ${t.length>1?`in product form(s) ${c+1}`:""}`),!1;return!0},L=()=>{if(Object.values(R).length>4){h.info("You can submit a maximum of 5 product forms at a time.");return}const d=b.length>0?Math.max(...b)+1:0;O(u=>[...u,d])},te=t=>{b.length>1&&(O(d=>d.filter(u=>u!==t)),B(d=>{const u={...d};return delete u[t],u}))},ae=(t,d)=>{B(u=>({...u,[t]:d}))},Q=async(t,d)=>{if(y(!!t),!_){C(!0);return}const u=Object.values(R),c=X(u,t);if(!c)return;if(c&&d){H(!0);return}const z=[],T=[];if(u.forEach((s,r)=>{(!s.title||!s.description||!s.subCategoryId)&&z.push(r+1)}),z.length>0&&!t){let s=`Please fill required fields:
`;z.forEach(({formNumber:r,missingFields:i})=>{s+=`Form ${r}: ${i.join(", ")}
`}),T.length>0&&(s+=`
Image is required for form(s): ${T.join(", ")}`),h.error(s);return}const $=Ee(m),re=u.length>1;try{if(re){const s=new FormData,r=[];for(const[i,p]of u.entries()){if(p.quantity){const v=p.quantity.toString().trim();if(!/^\d+$/.test(v)||parseInt(v)<1){h.error(`Invalid Quantity in Form ${i+1}`);return}}if(p.minimumBudget){const v=p.minimumBudget.toString().trim();if(!/^\d+$/.test(v)||parseInt(v)<1){h.error(`Invalid Budget range in Form ${i+1}`);return}}const ee={};$.forEach(v=>{if(v==="image"||v==="document"||(v==="oldProductValue"||v==="productCondition")&&p.productType!=="old_product")return;const Y=p[v];Y!=null?typeof Y=="object"?ee[v]=JSON.stringify(Y):ee[v]=Y:ee[v]=""}),r.push(ee),p.image&&$.includes("image")&&s.append("image",p.image),p.document&&$.includes("document")&&s.append("document",p.document)}s.append("products",JSON.stringify(r)),s.append("draft",t?"true":"false"),s.append("bidActiveDuration",o?o.toString():"0"),await S(n,u[0].subCategoryId||I,s,!0)}else{const s=u[0];console.log(s);const r=new FormData;if(s.quantity){const i=s.quantity.toString().trim();if(!/^\d+$/.test(i)||parseInt(i)<1){h.error("Invalid Quantity");return}}if(s.minimumBudget){const i=s.minimumBudget.toString().trim();if(!/^\d+$/.test(i)||parseInt(i)<1){h.error("Invalid Budget range");return}}$.forEach(i=>{if(i==="image"||i==="document"||(i==="oldProductValue"||i==="productCondition")&&s.productType!=="old_product")return;const p=s[i];p!=null?typeof p=="object"?r.append(i,JSON.stringify(p)):r.append(i,p):r.append(i,"")}),s.image&&$.includes("image")&&r.append("image",s.image),s.document&&$.includes("document")&&r.append("document",s.document),r.append("draft",t?"true":"false"),r.append("bidActiveDuration",o?o.toString():"0"),await S(n,s.subCategoryId||I,r,!1)}h.success(`${u.length} product form(s) ${t?"saved as draft":"submitted"} successfully!`),M(!0),setTimeout(()=>{O([0]),B({}),M(!1)},100)}catch(s){console.error("Error submitting forms:",s),h.error(`Failed to ${t?"save draft":"submit forms"}. Please try again.`)}};return l.useEffect(()=>{x&&(q||g("/"),window.location.reload())},[x]),e.jsxs(e.Fragment,{children:[e.jsx(ye,{setOpen:C,open:K}),e.jsx(Ye,{buttonType:q,loading:w,open:U,setOpen:H,setBidDuration:f,bidDuration:o,createProductFn:Q}),e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4",children:[e.jsxs("div",{className:"flex flex-row sm:justify-between justify-end items-center gap-3 mb-6",children:[e.jsx(ve,{className:"sm:block hidden",children:e.jsx(we,{children:e.jsxs(Ne,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>g(-1),children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx(ie,{className:"capitalize font-semibold text-gray-500",children:"Selected Product"}),e.jsx(Ce,{}),e.jsx(ie,{className:"capitalize font-semibold text-orange-600",children:m==="beauty"?"Personal Care":m==="electronics"?"Mobile, Tablet and Wearables":m==="sports"?"Sports & Stationary":m==="home"?"Home Appliances":m==="industrial"?"Industrial & Construction Material":m==="furniture"?"furniture and decor":m})]})})}),e.jsxs(J,{className:"bg-orange-700 cursor-pointer w-32 text-[12px] hover:bg-orange-600 text-white  flex items-center gap-1 underline",onClick:L,children:[e.jsx(Fe,{className:"h-3 w-3"}),"Add Product"]})]}),e.jsx("div",{className:"space-y-6",children:b.map((t,d)=>e.jsxs(e.Fragment,{children:[e.jsx(We,{formIndex:t,currentCategoryName:m,catByIdData:k,subCategroies:V,subCategoriesData:Z,onFormDataChange:ae,onRemoveForm:te,showRemoveButton:d>0,resetForm:W,subCategoryId:I},t),b.length>-1&&d<b.length-1&&e.jsx("div",{className:"bg-gray-400 w-full h-[2px] my-5"})]}))}),e.jsxs("div",{className:"flex justify-end gap-3 my-5",children:[e.jsx(J,{type:"button",variant:"outline",disabled:w,className:"w-32 cursor-pointer border-[#2C3E50] ",onClick:()=>Q(!0),children:w&&q?e.jsx(ce,{className:"w-5 h-5 animate-spin"}):" Save as Draft"}),e.jsx(J,{type:"button",disabled:w,className:"text-white w-32 cursor-pointer bc   border-primary-btn border-2",onClick:()=>Q(!1,!0),children:`Submit ${Object.keys(R).length>1?"All":""}`})]})]})]})};export{es as default};
