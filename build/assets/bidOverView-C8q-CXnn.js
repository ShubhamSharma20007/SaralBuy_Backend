import{au as M,u as Z,r,a as E,j as e,B as j,S as L,a9 as B}from"./index-nRz7PDd4.js";import{B as F,a as K,b as O,c as y,d as D}from"./breadcrumb-gFg8juDx.js";import{A as S,a as C}from"./avatar-CCyh8JC8.js";import{C as Q,a as $}from"./CustomSkeletons-D9FdukaD.js";import{T as H}from"./TableLisiting-ByMm-dXm.js";import{b as G}from"./index-3zwKqybI.js";import{b as Y}from"./bid.service-0Dku6ybv.js";import{d}from"./dateFormatter-CQy79qr9.js";import{m as J}from"./mergeName-Dsr0uQzc.js";import{c as U}from"./currencyConvertor-IA5kyJ7b.js";import{H as V}from"./house-CnFQLAg5.js";import{C as W}from"./calendar-days-u-qCTdjE.js";import{B as X}from"./banknote-DnmEgTIk.js";const xe=()=>{const{bidId:b}=M(),{fn:T,data:t,loading:u}=Z(Y.getBidById),[m,N]=r.useState(1),[x,_]=r.useState(10),[R,k]=r.useState(0),[q,z]=r.useState([]),w=E(),[p,A]=r.useState("");let n=r.useRef(null);r.useEffect(()=>{T(b,x,m)},[b,x,m]);const I=[{accessorKey:"avatar",header:"",cell:({row:s})=>e.jsx("div",{className:"*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 ",children:e.jsxs(S,{className:"w-10 h-10 flex justify-center items-center rounded-full",children:[e.jsx(C,{src:s.original?.avatar,alt:"@shadcn",className:"h-full w-full rounded-full"}),e.jsx(G,{className:"bg-gray-200 rounded-full flex w-full h-full  items-center justify-center text-sm font-semibold",children:"SS"})]})})},{accessorKey:"requirement",header:"Requirement "},{accessorKey:"requirement_post_on",header:"Requirement Posted On"},{accessorKey:"quote_submssion_date",header:"Quote Submission Date"},{accessorKey:"your_quote",header:"Your Quote"},{accessorKey:"status",header:"Status",cell:({row:s})=>s.original.status<=0?e.jsx(B,{className:"bg-red-100 text-red-500 rounded-full px-2 w-20",children:"Inactive"}):e.jsx(B,{className:"bg-green-100 text-green-500 rounded-full capitalize px-3 w-20",children:"Active"})}];r.useEffect(()=>{if(t){const{totalSellers:s,limit:i,page:g}=t;t?.product?.minimumBudget;const c=t?.sellers?.map(l=>{const o=new Date(l.earliestDeliveryDate).getTime(),f=Number(t.product?.bidActiveDuration),h=o+f*24*60*60*1e3,v=Date.now(),P=h-v;return{id:l?._id,requirement_post_on:d(t?.product?.createdAt),requirement:t?.product?.title,avatar:l?.seller?.profileImage,quote_submssion_date:d(l?.createdAt),your_quote:l?.budgetQuation,status:P}})||[];z(c),k(s),_(i),N(g)}},[t]),r.useEffect(()=>{if(!t?.createdAt||!t?.product?.bidActiveDuration)return;const s=new Date(t.createdAt).getTime(),i=Number(t.product.bidActiveDuration),g=s+i*24*60*60*1e3,c=()=>{const l=Date.now(),o=g-l;if(o<=0){A("Expired"),n.current&&clearInterval(n.current);return}const f=Math.floor(o/(1e3*60*60)),h=Math.floor(o%(1e3*60*60)/(1e3*60)),v=Math.floor(o%(1e3*60)/1e3);A(`${f}h ${h}m ${v}s`)};return c(),n.current=setInterval(c,1e3),()=>{n.current&&clearInterval(n.current)}},[t?.createdAt,t?.product?.bidActiveDuration]);const a=({label:s,value:i})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-gray-900 w-24 ",children:[s," :"]}),e.jsx("span",{className:"text-gray-600 font-medium truncate capitalize",children:i||"â€”"})]});return e.jsx(e.Fragment,{children:u?e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[" ",e.jsx(Q,{})]}):e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[e.jsx(F,{className:"hidden sm:block",children:e.jsx(K,{children:e.jsxs(O,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>w(-1),children:[e.jsx(y,{className:"capitalize font-regular text-gray-500",children:e.jsx(V,{className:"w-5 h-5"})}),e.jsx(D,{}),e.jsx(y,{className:"capitalize font-regular text-gray-500",children:"Quote Overview"}),e.jsx(D,{}),e.jsx(y,{className:"capitalize font-regular text-orange-600 font-semibold",children:t?.product?.title})]})})}),e.jsx("div",{className:"grid gap-8",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-[270px_1fr]",children:[e.jsxs("div",{className:"hidden md:block space-y-2 bg-gray-200/50 p-4 rounded-md sticky max-h-fit",children:[e.jsx("div",{className:"flex justify-center items-center mt-2 mb-12 relative",children:e.jsx("div",{className:"relative",children:e.jsx(S,{className:"w-28 h-28 border-gray-600 border-3 flex ",children:e.jsx(C,{src:t?.product?.image||"/no-image.webp",className:"w-full h-full object-contain rounded-full"})})})}),e.jsxs("div",{className:"grid gap-1 text-gray-600 px-3 space-y-3 ",children:[e.jsxs("p",{className:"text-left    text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{children:J(t?.buyer)})]}),e.jsxs("p",{className:"text-left   text-sm rounded-md  text-gray-600 flex items-center gap-2  ",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:"",children:t?.buyer?.currentLocation})]}),t?.product?.quantity&&e.jsxs("p",{className:"text-left text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{children:[t?.product?.quantity," units"]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:["Delivery By: ",e.jsx("span",{className:"font-semibold pl-1",children:d(t?.product?.paymentAndDelivery?.ex_deliveryDate)||"N/A"})]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsxs("span",{children:["Budget: ",e.jsx("span",{className:"font-semibold pl-1",children:t?.product?.minimumBudget?"Rs "+U(t?.product?.minimumBudget):"N/A"})]})]})]}),e.jsx(j,{onClick:()=>{w("/product-overview?productId="+t?.product?._id)},variant:"ghost",size:"lg",className:"border w-full mt-5 shadow-orange-500 border-orange-600 text-orange-600 rounded-[5px]  hover:bg-orange-500 hover:text-white cursor-pointer transition-all duration-300 ease-in-out underline-0",children:"Product Preview"})]}),e.jsx("div",{className:"space-y-10",children:e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"grid space-y-2",children:[e.jsxs("h2",{className:"text-sm font-[500] mb-2",children:["Date: ",d(t?.createdAt)]}),e.jsxs("div",{className:"flex justify-between items-center gap-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold capitalize item-center",children:t?.product?.title}),e.jsx("p",{className:"text-sm mt-2",children:t?.product?.description})]}),u||!p?e.jsx(L,{className:"h-8 w-24 rounded-full float-end"}):p!=="Expired"?e.jsx(j,{variant:"ghost",className:"float-end border rounded-full hover:bg-orange-700 hover:text-white text-sm bg-orange-700 text-white",children:p}):e.jsx(j,{variant:"ghost",className:"float-end border rounded-full hover:bg-orange-700 hover:text-white text-sm bg-orange-700 text-white",children:"Expired"})]}),e.jsxs("div",{className:"mt-4 grid sm:grid-cols-2 gap-x-8 gap-y-2 text-xs text-gray-600",children:[e.jsx(a,{label:"Category",value:t?.product?.categoryId?.categoryName}),e.jsx(a,{label:"Brand",value:t?.product?.brand||t?.product?.brandName}),e.jsx(a,{label:"Product Type",value:t?.product?.productType}),e.jsx(a,{label:"Type",value:t?.product?.typeOfProduct}),e.jsx(a,{label:"Payment",value:t?.product?.paymentAndDelivery?.paymentMode}),e.jsx(a,{label:"Org",value:t?.product?.paymentAndDelivery?.organizationName}),e.jsx(a,{label:"GST",value:t?.product?.paymentAndDelivery?.gstNumber}),e.jsx(a,{label:"Address",value:t?.product?.paymentAndDelivery?.organizationAddress}),e.jsx(a,{label:"Bids",value:t?.product?.totalBidCount}),e.jsx(a,{label:"Duration",value:`${t?.product?.bidActiveDuration} days`})]})]}),e.jsxs("div",{className:"mt-10 ",children:[e.jsx("p",{className:"font-bold text-lg whitespace-nowrap   tracking-tight text-orange-700/90",children:"Quote Placed"}),u?e.jsx($,{}):e.jsx(H,{data:q,columns:I,filters:!1,colorPalette:"gray",page:m,setPage:N,total:R,limit:x})]})]})})]})})]})})};export{xe as default};
