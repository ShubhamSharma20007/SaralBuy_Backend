import{j as e,D as xe,a as he,b as ge,c as be,S as fe,d as Ne,e as ye,f as je,g as X,I as d,B as p,h as P,u as ve,i as we,k as y,p as Pe,l as w,m as Be,r as i,n as De,o as Ce,q as Ae,t as u,C as _e,A as Ie,s as Se,v as Fe,w as Oe,H as ze,x as $,y as K,z as _,E as W,P as ee,L as c,F as se,G as ae,J as Re,K as Te}from"./index-uNPE2uVd.js";import{c as te}from"./currencyConvertor-IA5kyJ7b.js";const Me=({open:o,setOpen:j,setValue:b,value:l,handleCreteBid:S,createBidLoading:t,setBusinessDets:f,businessDets:x})=>e.jsx(e.Fragment,{children:e.jsx(xe,{open:o,onOpenChange:j,children:e.jsx(he,{className:"w-4xs",children:e.jsxs("form",{onSubmit:n=>{n.preventDefault(),S()},className:"p-2 max-w-md inline-block space-y-5 ",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ge,{className:" text-black text-3xl font-extrabold ",children:"Seller Verification"}),e.jsx(be,{className:" text-sm text-gray-600",children:" Placing Bid as an Individual or Business Owner?"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(fe,{onValueChange:n=>b?.(n),value:l,children:[e.jsx(Ne,{id:"userType",className:"w-full py-5 rounded-md border border-gray-300",children:e.jsx(ye,{placeholder:"Select"})}),e.jsxs(je,{children:[e.jsx(X,{value:"individual",className:"dropdown-hover py-2",children:"Individual"}),e.jsx(X,{value:"business",className:"dropdown-hover py-2",children:"Business Owner"})]})]}),l==="business"&&e.jsxs("div",{className:"grid space-y-2 mt-4",children:[e.jsx(d,{value:x.company_name,onChange:n=>{f({...x,company_name:n.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"company_name",placeholder:"Company Name"}),e.jsx(d,{value:x.company_reg_num,onChange:n=>{f({...x,company_reg_num:n.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"company_reg_num",placeholder:"Company Reg. Number"}),e.jsx(d,{value:x.gst_num,onChange:n=>{f({...x,gst_num:n.target.value})},className:"w-full py-5 rounded-md border border-gray-300",name:"gst_num",placeholder:"GSTIN Number"})]}),e.jsx(p,{disabled:!l||t,type:"submit",className:"w-full rounded-sm py-5  text-white font-bold cursor-pointer",children:t?e.jsx(P,{className:"w-5 h-5 animate-spin"}):"Place Bid"})]})]})})})});function I(o){return o?.brand==="others"&&o.hasOwnProperty("brandName")?o.brandName:o?.brand}const ke=()=>{const[o]=ve(),j=o.get("productId"),b=o.get("bidId"),l=we(),{fn:S,data:t,setData:f,loading:x}=y(Pe.getProductById),{fn:n,data:s,loading:re}=y(w.bidOverViewbyId),{fn:le,data:Z,loading:B}=y(w.updateUserBidDets),{fn:ie,data:F,loading:k}=y(w.getbidByProductId),{fn:ne,data:L,loading:O}=y(w.createBid),{fn:de,data:N,loading:D}=y(Be.addToCart),[ce,q]=i.useState(!1),[oe,C]=i.useState(!1),[v,z]=i.useState(""),[R,me]=i.useState({company_name:"",company_reg_num:"",gst_num:""}),E=De(),{handleSubmit:Y,formState:{errors:T},register:h,reset:A,control:Q,getValues:M}=Ce({resolver:Ae(Te),defaultValues:{firstName:"",lastName:"",budgetQuation:"",availableBrand:"",earliestDeliveryDate:void 0}}),U=async a=>{await de(a)};i.useEffect(()=>{N&&(N&&(N?.message).match(/already/)!==null?u.warning(N.message):u.success(N.message))},[N]),i.useEffect(()=>{j?S(j):b?n(b):u.error("Invalid request")},[j,b]),i.useEffect(()=>{if(t&&Array.isArray(t)){const a=t[0],r=a?.subProducts?.length>0?a.subProducts:[a];f({...a,products:r}),console.log(t)}},[t]);async function ue(){if(!t||t?.mainProduct?.userId?._id===l?.user?._id)return;if(v==="business"&&!R.company_name.trim()){u.error("company name is required");return}const a=t?.mainProduct.userId?._id,r=t?.mainProduct._id,m=l?.user._id,g=Number(M().budgetQuation)||0;let V={...M(),status:"active",businessType:v,...v==="business"&&{businessDets:R}};v||(u.error("business is required !"),C(!0));try{await Promise.all([ne(a,r,V),w.createRequirement({productId:r,sellerId:m,buyerId:a,budgetAmount:g})])}catch(pe){console.log(pe),u.error("Failed to place bid")}}async function H(a){const r=l?.user,m=M();if(!r?._id)return localStorage.setItem("preLoginBidForm",JSON.stringify(m)),q(!0);if(!t&&!s)return console.log("product && bid not found in frontend");t?C(!0):await le(b,a)}i.useEffect(()=>{Z&&(u.success("Bid updated successfully"),z(""))},[Z]),i.useEffect(()=>{L&&(t?.mainProduct?f(a=>{const r={...a.mainProduct,totalBidCount:a.mainProduct.totalBidCount+1},m=a.subProducts?.map(g=>({...g,totalBidCount:(g.totalBidCount||0)+1}));return{...a,mainProduct:r,subProducts:m,products:m}}):console.log("main product is missing to update bid count"),u.success("Bid created successfully"),C(!1),z(""),A({firstName:l.user.firstName,lastName:l.user.lastName,budgetQuation:"",availableBrand:"",earliestDeliveryDate:void 0}))},[L]),i.useEffect(()=>{if(l?.user){const a=localStorage.getItem("preLoginBidForm");if(a){const r=JSON.parse(a);A({...r,firstName:s?s?.seller?.firstName:l.user.firstName,lastName:s?s?.seller?.lastName:l.user.lastName}),localStorage.removeItem("preLoginBidForm")}else A({firstName:s?s?.seller?.firstName:l.user.firstName,lastName:s?s?.seller?.lastName:l.user.lastName,budgetQuation:s?s?.budgetQuation:"",availableBrand:s?s?.availableBrand:"",earliestDeliveryDate:s?s?.earliestDeliveryDate:void 0})}},[l,A,s]),i.useEffect(()=>{},[]),i.useEffect(()=>{for(let a=0;a<Object.entries(T).length;a++){u.error(Object.entries(T)[a][1]?.message);break}},[T]);const J=a=>{const r=document.createElement("a");r.href=a,r.download=a.split("/").pop()||"document",r.target="_blank",document.body.appendChild(r),r.click(),document.body.removeChild(r)},G=async a=>{await ie(a)};return i.useEffect(()=>{if(F){const{_id:a}=F;E("/bid-overview/"+a)}},[F]),e.jsx(e.Fragment,{children:re||x?e.jsx("div",{className:"max-w-7xl mx-auto p-4 ",children:e.jsx(_e,{})}):e.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 min-h-screen",children:[e.jsx(Ie,{setOpen:q,open:ce}),e.jsx(Me,{businessDets:R,setBusinessDets:me,setOpen:C,open:oe,setValue:z,value:v,handleCreteBid:ue,createBidLoading:O}),e.jsx(Se,{className:"hidden sm:block",children:e.jsx(Fe,{children:e.jsxs(Oe,{className:"flex items-center gap-2 cursor-pointer ",onClick:()=>E(-1),children:[e.jsx(ze,{className:"h-4 w-4"}),e.jsx($,{}),e.jsx(K,{className:"capitalize font-regular text-gray-500",children:"Product"}),e.jsx($,{}),e.jsx(K,{className:"capitalize font-regular text-gray-500",children:s?s?.product?.title:t?.mainProduct?.title})]})})}),t?.subProducts?.length===0||s?e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-4 bg-gray-100 flex justify-center items-center rounded-lg p-4 max-h-64 ",children:e.jsx("img",{src:(s?s?.product?.image:t?.mainProduct?.image)||"/no-image.webp",alt:"Product",className:"object-contain h-full w-full mix-blend-darken"})}),e.jsxs("div",{className:"lg:col-span-8 bg-transparent rounded-lg p-4 space-y-4",children:[e.jsxs("h2",{className:"text-sm font-medium mb-2",children:["Date : ",_(s?s?.product?.createdAt:t?.mainProduct?.createdAt)]}),e.jsx("h2",{className:"text-xl font-bold capitalize",children:s?s?.product?.title:t?.mainProduct?.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t?.mainProduct?.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1 pr-3 border-r-2 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{className:"capitalize",children:W(s?s?.buyer:t?.mainProduct?.userId)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1  pr-3 border-r-2 py-1 min-w-32   max-w-[50%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:" line-clamp-2",children:s?s?.buyer?.address:t?.mainProduct?.userId?.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{className:"capitalize",children:[s?s?.product?.quantity:t?.mainProduct?.quantity||"N/A"," units"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-5 ",children:[e.jsxs(p,{disabled:k||(s?s.product?.totalBidCount:t?.mainProduct?.totalBidCount)===0,onClick:()=>G(s?s?.product?._id:t?.mainProduct?._id),variant:"outline",className:"min-w-32 text-sm border-gray-400 bg-transparent border-[2px] flex items-center gap-2 hover:bg-transparent  cursor-pointer",children:[e.jsx("img",{src:"/icons/Layer_1.png",className:"w-4 h-4 "}),"Total Bids :",e.jsx("span",{className:"font-semibold",children:s?s.product?.totalBidCount:t?.mainProduct?.totalBidCount||0})]}),!s&&e.jsx(p,{className:"min-w-32 border-[2px] border-orange-500 text-orange-500 hover:bg-orange-600 hover:text-white transition-all ease-in-out duration-300 cursor-pointer",variant:"outline",onClick:()=>U(t?.mainProduct?._id),disabled:D||t?.mainProduct?.userId?._id===l?.user?._id,children:D?e.jsx(P,{className:"w-5 h-5 animate-spin"}):"Add to Cart"})]})]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-12 gap-6 ",children:[e.jsxs("div",{className:"lg:col-span-7  rounded-lg p-6 space-y-3 ",children:[e.jsx("h3",{className:"font-semibold text-orange-600 text-xl",children:"Requirement Specifications"}),e.jsxs("div",{className:"text-sm space-y-2 text-gray-600 ",children:[e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Product Condition:"})," ",(s?s?.product?.subCategory?.name:t?.mainProduct?.categoryId?.categoryName)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Brand:"})," ",I(s?s?.product:t?.mainProduct)||"N/A"]}),t?.mainProduct?.categoryId?.categoryName==="industrial"&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Construction Tool Type:"})," Industrial Tool"]}),(s?.product?.minimumBudget||t?.mainProduct?.minimumBudget)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Budget:"})," ",te(s?s?.product?.minimumBudget:t?.mainProduct?.minimumBudget)]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Required Delivery Date:"})," ",_(s?s?.product?.paymentAndDelivery?.ex_deliveryDate:t?.mainProduct?.paymentAndDelivery?.ex_deliveryDate)||"N/A"]}),(s?s?.product?.color:t?.mainProduct?.color)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Color:"})," ",(s?s?.product?.color:t?.mainProduct?.color)||"N/A"]}),(s?s?.product?.typeOfVehicle:t?.mainProduct?.typeOfVehicle)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Vehicle:"})," ",(s?s?.product?.typeOfVehicle:t?.mainProduct?.typeOfVehicle)||"N/A"]}),(s?s?.product?.typeOfProduct:t?.mainProduct?.typeOfProduct)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Product:"})," ",(s?s?.product?.typeOfProduct:t?.mainProduct?.typeOfProduct)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Payment Mode:"})," ",(s?s?.product?.paymentAndDelivery?.paymentMode:t?.mainProduct?.paymentAndDelivery?.paymentMode)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2  ",children:[e.jsx("span",{className:"font-semibold",children:"Supporting Documents:"}),t?.mainProduct?.document||s?.product?.document?e.jsxs("p",{onClick:()=>J(t?.mainProduct?.document||s?.product?.document),className:"flex gap-1 items-center hover:underline cursor-pointer",children:[e.jsx(ee,{className:"w-4 h-4 text-orange-600"}),"Download Document"]}):"N/A"]})]})]}),e.jsxs("form",{className:"lg:col-span-5 bg-gray-200/80 rounded-lg p-6 space-y-4",onSubmit:Y(H),children:[e.jsx("h3",{className:"font-semibold text-orange-600",children:"Fill the Details to Place Bid"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l?.user?._id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"firstName",className:"mb-2 text-sm",children:"First Name"}),e.jsx(d,{disabled:!0,type:"text",placeholder:"First Name",id:"firstName",...h("firstName"),className:"bg-white  select-none"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"lastName",className:"mb-2 text-sm",children:"Last Name"}),e.jsx(d,{disabled:!0,type:"text",placeholder:"Last Name",id:"lastName",...h("lastName"),className:"bg-white  select-none"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"bq",className:"mb-2 text-sm",children:"Budget Quotation"}),e.jsx(d,{type:"number",placeholder:"₹ 00",id:"bq",className:"bg-white",...h("budgetQuation")})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Available Brand"}),e.jsx(d,{type:"text",placeholder:"Brand XYZ",id:"ab",className:"bg-white",...h("availableBrand")})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Earliest Deliver By"}),e.jsx(se,{control:Q,name:"earliestDeliveryDate",render:({field:a})=>e.jsx(ae,{disabledBeforeDate:new Date(new Date().getTime()-1440*60*1e3),date:a.value,title:"DD-MM-YYYY",className:"w-full",setDate:r=>a.onChange(r)})})]})]}),s?e.jsx(p,{disabled:B,variant:"ghost",className:"w-32 float-end border shadow-orange-500 border-orange-500 bg-orange-600  transition-all ease-in-out duration-300 hover:bg-orange-500 text-white hover:text-white cursor-pointer",children:B?e.jsx(P,{className:"w-5 h-5 animate-spin"}):"Update Bid"}):e.jsx(p,{disabled:t?.mainProduct?.userId?._id===l?.user?._id||O,variant:"ghost",className:"w-32 float-end border text-xs bg-orange-700  transition-all ease-in-out duration-300 hover:bg-orange-600 text-white hover:text-white cursor-pointer",children:"Place Bid"}),e.jsx("div",{})]})]})]}):t?.subProducts&&t?.subProducts.map((a,r)=>{const m=r===t?.subProducts?.length-1;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx("div",{className:"lg:col-span-4 bg-gray-100 flex justify-center items-center rounded-lg p-4 max-h-64 ",children:e.jsx("img",{src:(s?s?.product?.image:a?.image)||"/no-image.webp",alt:"Product",className:"object-contain h-full w-full mix-blend-darken"})}),e.jsxs("div",{className:"lg:col-span-8 rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-sm font-medium mb-2",children:["Date : ",_(s?s?.product?.createdAt:a?.createdAt)]}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx(Re,{className:"w-5 h-5 text-orange-500"}),e.jsxs("p",{className:"text-gray-500 text-sm font-semibold",children:["Product (",r+1,")"]})]})]}),e.jsx("h2",{className:"text-xl font-bold capitalize",children:s?s?.product?.title:a?.title}),e.jsx("p",{className:"text-sm text-gray-600",children:a?.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1 pr-3 border-r-2 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{className:"capitalize",children:W(s?s?.buyer:a?.userId)||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1  pr-3 border-r-2 py-1 min-w-32   max-w-[50%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:" line-clamp-2",children:s?s?.buyer?.address:a?.userId?.address||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1 py-1 min-w-32 max-w-[25%]",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{className:"capitalize",children:[s?s?.product?.quantity:a?.quantity||"N/A"," units"]})]})]}),r===0&&e.jsxs("div",{className:"flex items-center gap-4 mt-5 ",children:[e.jsxs(p,{disabled:k||(s?s.product?.totalBidCount:a?.totalBidCount)===0,onClick:()=>G(s?s?.product?._id:a?._id),variant:"outline",className:"min-w-32 text-sm border-gray-400 bg-transparent border-[2px] flex items-center gap-2 hover:bg-transparent  cursor-pointer ",children:[e.jsx("img",{src:"/icons/Layer_1.png",className:"w-4 h-4 "}),"Total Bids :",e.jsx("span",{className:"font-semibold",children:s?s.product?.totalBidCount:a?.totalBidCount||0})]}),!s&&e.jsx(p,{className:"min-w-32 border-[2px] border-orange-500 text-orange-500 hover:bg-orange-600 hover:text-white transition-all ease-in-out duration-300 cursor-pointer",variant:"outline",onClick:()=>U(a?._id),disabled:D||a?.userId?._id===l?.user?._id,children:D?e.jsx(P,{className:"w-5 h-5 animate-spin"}):"Add to Cart"})]})]})]}),e.jsxs("div",{className:`mt-5 grid grid-cols-1 lg:${m?"grid-cols-12":"grid-cols-1"} gap-6`,children:[e.jsxs("div",{className:`grid lg:${m?"col-span-7":"col-span-1"}  rounded-lg  space-y-3 `,children:[e.jsx("h3",{className:"font-semibold text-orange-600 text-xl",children:"Requirement Specifications"}),e.jsxs("div",{className:"text-sm space-y-2 text-gray-600 ",children:[e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Product Condition:"})," ",(s?s?.product?.subCategory?.name:a?.categoryId?.categoryName)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize ",children:[e.jsx("span",{className:"font-semibold",children:"Brand:"})," ",I(s?s?.product:a)||"N/A"]}),a?.categoryId?.categoryName==="industrial"&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Construction Tool Type:"})," Industrial Tool"]}),(s?.product?.minimumBudget||a?.minimumBudget)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Budget:"})," ",te(s?s?.product?.minimumBudget:a?.minimumBudget)]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 ",children:[e.jsx("span",{className:"font-semibold",children:"Required Delivery Date:"})," ",_(s?s?.product?.paymentAndDelivery?.ex_deliveryDate:a?.paymentAndDelivery?.ex_deliveryDate)||"N/A"]}),(s?s?.product?.color:a?.color)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Color:"})," ",(s?s?.product?.color:a?.color)||"N/A"]}),(s?s?.product?.typeOfVehicle:a?.typeOfVehicle)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Vehicle:"})," ",(s?s?.product?.typeOfVehicle:a?.typeOfVehicle)||"N/A"]}),(s?s?.product?.typeOfProduct:a?.typeOfProduct)&&e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Type of Product:"})," ",(s?s?.product?.typeOfProduct:a?.typeOfProduct)||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2 capitalize",children:[e.jsx("span",{className:"font-semibold",children:"Payment Mode:"})," ",s?s?.product?.paymentAndDelivery?.paymentMode:a?.paymentAndDelivery?.paymentMode||"N/A"]}),e.jsxs("p",{className:"flex items-center justify-between py-2 border-b-2  ",children:[e.jsx("span",{className:"font-semibold",children:"Supporting Documents:"}),a?.document||s?.product?.document?e.jsxs("span",{onClick:()=>{J(a?.document||s?.product?.document)},className:"flex gap-1 items-center hover:underline cursor-pointer",children:[e.jsx(ee,{className:"w-4 h-4 text-orange-600"})," ",a?.document||s?.product?.document]}):"N/A"]})]})]}),r===t?.products?.length-1&&e.jsxs("form",{className:"lg:col-span-5  bg-gray-200/80 rounded-lg p-6 space-y-4",onSubmit:Y(H),children:[e.jsx("h3",{className:"font-semibold text-orange-600",children:"Fill the Details to Place Bid"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[l?.user?._id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"firstName",className:"mb-2 text-sm",children:"First Name"}),e.jsx(d,{disabled:!0,type:"text",placeholder:"First Name",id:"firstName",...h("firstName"),className:"bg-white  select-none"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"lastName",className:"mb-2 text-sm",children:"Last Name"}),e.jsx(d,{disabled:!0,type:"text",placeholder:"Last Name",id:"lastName",...h("lastName"),className:"bg-white  select-none"})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"bq",className:"mb-2 text-sm",children:"Budget Quotation"}),e.jsx(d,{type:"number",placeholder:"₹ 00",id:"bq",className:"bg-white",...h("budgetQuation")})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Available Brand"}),e.jsx(d,{type:"text",placeholder:"Brand XYZ",id:"ab",className:"bg-white",...h("availableBrand")})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(c,{htmlFor:"ab",className:"mb-2 text-sm",children:"Earliest Deliver By"}),e.jsx(se,{control:Q,name:"earliestDeliveryDate",render:({field:g})=>e.jsx(ae,{disabledBeforeDate:new Date(new Date().getTime()-1440*60*1e3),date:g.value,title:"DD-MM-YYYY",className:"w-full",setDate:V=>g.onChange(V)})})]})]}),s?e.jsx(p,{disabled:B,variant:"ghost",className:"w-32 float-end border shadow-orange-500 border-orange-500 bg-orange-600  transition-all ease-in-out duration-300 hover:bg-orange-500 text-white hover:text-white cursor-pointer",children:B?e.jsx(P,{className:"w-5 h-5 animate-spin"}):"Update Bid"}):e.jsx(p,{disabled:t?.mainProduct?.userId?._id===l?.user?._id||O,variant:"ghost",className:"w-32 float-end border text-xs bg-orange-700  transition-all ease-in-out duration-300 hover:bg-orange-600 text-white hover:text-white cursor-pointer",children:"Place Bid"})]})]}),t?.subProducts.length>-1&&r<t?.subProducts.length-1&&e.jsx("div",{className:"bg-gray-400 w-full h-[2px] my-5"})]})})]})})};export{ke as default};
