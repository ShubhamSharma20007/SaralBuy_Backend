import{N as I,k as L,l as T,r as t,n as _,E as b,z as p,j as e,C as F,s as K,v as P,w as $,y as h,H,x as y,ah as N,ai as w,ab as O,aj as q,B as Q,ak as G,ac as J,ag as U}from"./index-DsxJBjEL.js";import{c as g}from"./currencyConvertor-IA5kyJ7b.js";import{B as V}from"./banknote-BQP29Q0j.js";const ee=()=>{const{bidId:f}=I(),{fn:B,data:a,loading:d}=L(T.getBidById),[i,j]=t.useState(1),[n,A]=t.useState(10),[S,k]=t.useState(0),[D,R]=t.useState([]),C=_(),[o,v]=t.useState("");let r=t.useRef(null);t.useEffect(()=>{B(f,n,i)},[f,n,i]);const Z=[{accessorKey:"avatar",header:"",cell:({row:l})=>e.jsx("div",{className:"*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 ",children:e.jsxs(N,{className:"w-10 h-10 flex justify-center items-center rounded-full",children:[e.jsx(w,{src:l.original?.avatar,alt:"@shadcn",className:"h-full w-full rounded-full"}),e.jsx(U,{children:"SS"})]})})},{accessorKey:"date",header:"Date"},{accessorKey:"bid_by",header:"Bid By"},{accessorKey:"budget",header:"Budget"},{accessorKey:"bid_budget",header:"Bid Budget"}];return t.useEffect(()=>{if(a){const{totalSellers:l,limit:m,page:x}=a,c=a?.product?.minimumBudget||0,u=a?.sellers?.map(s=>({id:s?._id,avatar:s?.seller?.profileImage,date:p(s?.createdAt),bid_by:b(s?.seller),budget:g(c),bid_budget:g(s?.budgetQuation)}))||[];R(u),k(l),A(m),j(x)}},[a]),t.useEffect(()=>{if(!a?.createdAt||!a?.product?.bidActiveDuration)return;const l=new Date(a.createdAt).getTime(),m=Number(a.product.bidActiveDuration),x=l+m*24*60*60*1e3,c=()=>{const u=Date.now(),s=x-u;if(s<=0){v("Expired"),r.current&&clearInterval(r.current);return}const E=Math.floor(s/(1e3*60*60)),M=Math.floor(s%(1e3*60*60)/(1e3*60)),z=Math.floor(s%(1e3*60)/1e3);v(`${E}h ${M}m ${z}s`)};return c(),r.current=setInterval(c,1e3),()=>{r.current&&clearInterval(r.current)}},[a?.createdAt,a?.product?.bidActiveDuration]),e.jsx(e.Fragment,{children:d?e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[" ",e.jsx(F,{})]}):e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[e.jsx(K,{className:"hidden sm:block",children:e.jsx(P,{children:e.jsxs($,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>C(-1),children:[e.jsx(h,{className:"capitalize font-regular text-gray-500",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsx(y,{}),e.jsx(h,{className:"capitalize font-regular text-gray-500",children:"Bid Overview"}),e.jsx(y,{}),e.jsx(h,{className:"capitalize font-regular text-orange-600 font-semibold",children:a?.product?.title})]})})}),e.jsx("div",{className:"grid gap-8",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-[270px_1fr]",children:[e.jsxs("div",{className:"hidden md:block space-y-2 bg-gray-200/50 p-4 rounded-md sticky max-h-fit",children:[e.jsx("div",{className:"flex justify-center items-center mt-2 mb-12 relative",children:e.jsx("div",{className:"relative",children:e.jsx(N,{className:"w-28 h-28 border-gray-600 border-3 flex ",children:e.jsx(w,{src:a?.product?.image||"/no-image.webp",className:"w-full h-full object-contain rounded-full"})})})}),e.jsxs("div",{className:"grid gap-1 text-gray-600 px-3 space-y-3 ",children:[e.jsxs("p",{className:"text-left    text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{children:b(a?.buyer)})]}),e.jsxs("p",{className:"text-left   text-sm rounded-md  text-gray-600 flex items-center gap-2  ",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:"",children:a?.buyer?.currentLocation})]}),e.jsxs("p",{className:"text-left text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{children:[a?.product?.quantity," units"]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsxs("span",{children:["Delivery By: ",e.jsx("span",{className:"font-semibold pl-1",children:p(a?.product?.paymentAndDelivery?.ex_deliveryDate)||"N/A"})]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsxs("span",{children:["Budget: ",e.jsx("span",{className:"font-semibold pl-1",children:a?.product?.minimumBudget?"Rs "+g(a?.product?.minimumBudget):"N/A"})]})]})]})]}),e.jsx("div",{className:"space-y-10",children:e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"grid space-y-2",children:[e.jsxs("h2",{className:"text-sm font-[500] mb-2",children:["Date: ",p(a?.createdAt)]}),e.jsxs("div",{className:"flex justify-between items-center gap-10",children:[e.jsx("h2",{className:"text-xl font-bold capitalize item-center",children:a?.product?.title}),d||!o?e.jsx(q,{className:"h-8 w-24 rounded-full float-end"}):o!=="Expired"?e.jsx(Q,{variant:"ghost",className:"float-end border rounded-full hover:bg-orange-700 hover:text-white text-sm bg-orange-700 text-white",children:o}):e.jsx("span",{className:"text-red-500 text-sm font-medium float-end",children:"Expired"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 ",children:a?.product?.description})]}),e.jsxs("div",{className:"mt-10 ",children:[e.jsx("p",{className:"font-bold text-lg whitespace-nowrap   tracking-tight text-orange-700/90",children:"Bids Placed"}),d?e.jsx(G,{}):e.jsx(J,{data:D,columns:Z,filters:!1,colorPalette:"gray",page:i,setPage:j,total:S,limit:n})]})]})})]})})]})})};export{ee as default};
