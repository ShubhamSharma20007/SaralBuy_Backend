import{Q as E,k as M,l as T,r as a,n as P,z as d,j as e,C as L,s as F,v as K,w as Q,y as v,H as O,x as A,ak as B,al as D,E as $,ae as H,B as j,ad as Y,am as G,af as J,aj as U,an as S}from"./index-C-4pG0nN.js";import{c as V}from"./currencyConvertor-IA5kyJ7b.js";import{B as W}from"./banknote-GJcvB213.js";const ae=()=>{const{bidId:y}=E(),{fn:k,data:t,loading:o}=M(T.getBidById),[u,b]=a.useState(1),[m,_]=a.useState(10),[R,q]=a.useState(0),[C,z]=a.useState([]),w=P(),[x,N]=a.useState("");let n=a.useRef(null);a.useEffect(()=>{k(y,m,u)},[y,m,u]);const I=[{accessorKey:"avatar",header:"",cell:({row:s})=>e.jsx("div",{className:"*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 ",children:e.jsxs(B,{className:"w-10 h-10 flex justify-center items-center rounded-full",children:[e.jsx(D,{src:s.original?.avatar,alt:"@shadcn",className:"h-full w-full rounded-full"}),e.jsx(U,{className:"bg-gray-200 rounded-full flex w-full h-full  items-center justify-center text-sm font-semibold",children:"SS"})]})})},{accessorKey:"requirement",header:"Requirement "},{accessorKey:"requirement_post_on",header:"Requirement Posted On"},{accessorKey:"quote_submssion_date",header:"Quote Submission Date"},{accessorKey:"your_quote",header:"Your Quote"},{accessorKey:"status",header:"Status",cell:({row:s})=>s.original.status<=0?e.jsx(S,{className:"bg-red-100 text-red-500 rounded-full px-2 w-20",children:"Inactive"}):e.jsx(S,{className:"bg-green-100 text-green-500 rounded-full capitalize px-3 w-20",children:"Active"})}];return a.useEffect(()=>{if(t){const{totalSellers:s,limit:c,page:p}=t;t?.product?.minimumBudget;const i=t?.sellers?.map(r=>{const l=new Date(r.earliestDeliveryDate).getTime(),h=Number(t.product?.bidActiveDuration),g=l+h*24*60*60*1e3,f=Date.now(),Z=g-f;return{id:r?._id,requirement_post_on:d(t?.product?.createdAt),requirement:t?.product?.title,avatar:r?.seller?.profileImage,quote_submssion_date:d(r?.createdAt),your_quote:r?.budgetQuation,status:Z}})||[];z(i),q(s),_(c),b(p)}},[t]),a.useEffect(()=>{if(!t?.createdAt||!t?.product?.bidActiveDuration)return;const s=new Date(t.createdAt).getTime(),c=Number(t.product.bidActiveDuration),p=s+c*24*60*60*1e3,i=()=>{const r=Date.now(),l=p-r;if(l<=0){N("Expired"),n.current&&clearInterval(n.current);return}const h=Math.floor(l/(1e3*60*60)),g=Math.floor(l%(1e3*60*60)/(1e3*60)),f=Math.floor(l%(1e3*60)/1e3);N(`${h}h ${g}m ${f}s`)};return i(),n.current=setInterval(i,1e3),()=>{n.current&&clearInterval(n.current)}},[t?.createdAt,t?.product?.bidActiveDuration]),e.jsx(e.Fragment,{children:o?e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[" ",e.jsx(L,{})]}):e.jsxs("div",{className:"w-full max-w-7xl mx-auto py-6 space-y-6 px-4 overflow-auto",children:[e.jsx(F,{className:"hidden sm:block",children:e.jsx(K,{children:e.jsxs(Q,{className:"flex items-center gap-2 cursor-pointer",onClick:()=>w(-1),children:[e.jsx(v,{className:"capitalize font-regular text-gray-500",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx(A,{}),e.jsx(v,{className:"capitalize font-regular text-gray-500",children:"Quote Overview"}),e.jsx(A,{}),e.jsx(v,{className:"capitalize font-regular text-orange-600 font-semibold",children:t?.product?.title})]})})}),e.jsx("div",{className:"grid gap-8",children:e.jsxs("div",{className:"grid gap-8 md:grid-cols-[270px_1fr]",children:[e.jsxs("div",{className:"hidden md:block space-y-2 bg-gray-200/50 p-4 rounded-md sticky max-h-fit",children:[e.jsx("div",{className:"flex justify-center items-center mt-2 mb-12 relative",children:e.jsx("div",{className:"relative",children:e.jsx(B,{className:"w-28 h-28 border-gray-600 border-3 flex ",children:e.jsx(D,{src:t?.product?.image||"/no-image.webp",className:"w-full h-full object-contain rounded-full"})})})}),e.jsxs("div",{className:"grid gap-1 text-gray-600 px-3 space-y-3 ",children:[e.jsxs("p",{className:"text-left    text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M7.5 6a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0ZM3.751 20.105a8.25 8.25 0 0 1 16.498 0 .75.75 0 0 1-.437.695A18.683 18.683 0 0 1 12 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 0 1-.437-.695Z",clipRule:"evenodd"})}),e.jsx("span",{children:$(t?.buyer)})]}),e.jsxs("p",{className:"text-left   text-sm rounded-md  text-gray-600 flex items-center gap-2  ",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsx("span",{className:"",children:t?.buyer?.currentLocation})]}),t?.product?.quantity&&e.jsxs("p",{className:"text-left text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-4 text-gray-500",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}),e.jsxs("span",{children:[t?.product?.quantity," units"]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs("span",{children:["Delivery By: ",e.jsx("span",{className:"font-semibold pl-1",children:d(t?.product?.paymentAndDelivery?.ex_deliveryDate)||"N/A"})]})]}),e.jsxs("p",{className:"text-left  text-sm rounded-md  text-gray-600 flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{children:["Budget: ",e.jsx("span",{className:"font-semibold pl-1",children:t?.product?.minimumBudget?"Rs "+V(t?.product?.minimumBudget):"N/A"})]})]})]}),e.jsx(j,{onClick:()=>{w("/product-overview?productId="+t?.product?._id)},variant:"ghost",size:"lg",className:"border w-full mt-5 shadow-orange-500 border-orange-600 text-orange-600 rounded-[5px]  hover:bg-orange-500 hover:text-white cursor-pointer transition-all duration-300 ease-in-out underline-0",children:"Product Preview"})]}),e.jsx("div",{className:"space-y-10",children:e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"grid space-y-2",children:[e.jsxs("h2",{className:"text-sm font-[500] mb-2",children:["Date: ",d(t?.createdAt)]}),e.jsxs("div",{className:"flex justify-between items-center gap-10",children:[e.jsx("h2",{className:"text-xl font-bold capitalize item-center",children:t?.product?.title}),o||!x?e.jsx(Y,{className:"h-8 w-24 rounded-full float-end"}):x!=="Expired"?e.jsx(j,{variant:"ghost",className:"float-end border rounded-full hover:bg-orange-700 hover:text-white text-sm bg-orange-700 text-white",children:x}):e.jsx(j,{variant:"ghost",className:"float-end border rounded-full hover:bg-orange-700 hover:text-white text-sm bg-orange-700 text-white",children:"Expired"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 ",children:t?.product?.description})]}),e.jsxs("div",{className:"mt-10 ",children:[e.jsx("p",{className:"font-bold text-lg whitespace-nowrap   tracking-tight text-orange-700/90",children:"Quote Placed"}),o?e.jsx(G,{}):e.jsx(J,{data:C,columns:I,filters:!1,colorPalette:"gray",page:u,setPage:b,total:R,limit:m})]})]})})]})})]})})};export{ae as default};
