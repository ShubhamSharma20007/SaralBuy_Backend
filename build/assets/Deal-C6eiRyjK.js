import{a as T,r as s,u as o,b as i,j as e,a9 as r,B as u}from"./index-nRz7PDd4.js";import{T as B,a as I,b as p,c as m}from"./tabs-86dbQy6C.js";/* empty css                        */import{a as f}from"./CustomSkeletons-D9FdukaD.js";import{T as g}from"./TableLisiting-ByMm-dXm.js";import{A as x,a as h,b as v}from"./index-3zwKqybI.js";import{d as b}from"./dateFormatter-CQy79qr9.js";import{m as j}from"./mergeName-Dsr0uQzc.js";import{f as N}from"./fallBackName-CJO8Y_N6.js";import"./index-7tktKguZ.js";const M=()=>{const c=T(),w=[{accessorKey:"avtar",header:"",cell:({row:t})=>e.jsx("div",{className:"*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 ",children:e.jsxs(x,{className:"w-10 h-10 ",children:[e.jsx(h,{src:t.original.avatar,className:"rounded-full w-full h-full object-cover"}),e.jsx(v,{className:"bg-gray-200 rounded-full flex w-full h-full  items-center justify-center text-sm font-semibold",children:N(t.original.finalized_with)})]})})},{accessorKey:"date",header:"Date"},{accessorKey:"finalized_with",header:"Awarded To"},{accessorKey:"requirement",header:"Requirement"},{accessorKey:"final_budget",header:"Final Budget"},{accessorKey:"dealStatus",header:"Deal Status",cell:({row:t})=>{const a=t.original?.dealStatus?.toLowerCase()==="rejected";return t.original?.dealStatus?a?e.jsx(r,{className:"bg-red-100 text-red-500 rounded-full px-2 ",children:"Rejected"}):e.jsx(r,{className:"bg-green-100 text-green-500 rounded-full capitalize px-3 ",children:t.original?.dealStatus}):e.jsx(r,{className:"bg-transparent text-black rounded-full px-2 w-20 text-md",children:"N/A"})}},{accessorKey:"action",header:"Action",cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(u,{className:"text-sm cursor-pointer text-gray-600 underline",variant:"link",onClick:()=>{c("/product-overview?productId="+t.original?.productId)},children:"View"})})}],y=[{accessorKey:"avtar",header:"",cell:({row:t})=>e.jsx("div",{className:"*:data-[slot=avatar]:ring-background flex -space-x-2 *:data-[slot=avatar]:ring-2 ",children:e.jsxs(x,{className:"w-10 h-10",children:[e.jsx(h,{src:t.original.avatar,alt:"@shadcn",className:"rounded-full w-full h-full object-cover"}),e.jsx(v,{className:"bg-gray-200 rounded-full flex w-full h-full  items-center justify-center text-sm font-semibold",children:N(t.original.bid_to)})]})})},{accessorKey:"date",header:"Date",cell:({row:t})=>e.jsx("span",{className:"whitespace-nowrap text-sm",children:t.getValue("date")})},{accessorKey:"bid_to",header:"Buyer"},{accessorKey:"product",header:"Product"},{accessorKey:"your_budget",header:"Final Price"},{accessorKey:"dealStatus",header:"Deal Status",cell:({row:t})=>{const a=t.original?.dealStatus?.toLowerCase()==="rejected";return t.original?.dealStatus?a?e.jsx(r,{className:"bg-red-100 text-red-500 rounded-full px-2 w-20",children:"Rejected"}):e.jsx(r,{className:"bg-green-100 text-green-500 rounded-full capitalize px-3 w-20",children:t.original?.dealStatus}):e.jsx(r,{className:"bg-transparent text-black rounded-full px-2 w-20 text-md",children:"N/A"})}},{accessorKey:"action",header:"Action",cell:({row:t})=>e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(u,{className:"text-sm cursor-pointer text-gray-600 underline",variant:"link",onClick:()=>{c("/product-overview?productId="+t.original?.productId)},children:"View"})})}],[n,_]=s.useState("approved_bids"),{fn:S,data:l,loading:A}=o(i.getApprovedPendingRequirements),{fn:D,data:d,loading:q}=o(i.getCompletedApprovedRequirements),[K,R]=s.useState([]),[k,C]=s.useState([]);return s.useEffect(()=>{n==="approved_bids"?S():D()},[n]),s.useEffect(()=>{if(d?.data&&d.data.length>0){const t=d.data.map(a=>({_id:a._id,productId:a?.product?._id,avatar:a?.product?.image,date:b(a?.createdAt),finalized_with:j(a?.seller),requirement:a?.product?.title,your_budget:a?.product?.minimumBudget,final_budget:a?.finalBudget,dealStatus:a?.closedDealStatus==="waiting_seller_approval"||a?.closedDealStatus==="pending"?"Waiting for seller approval":a?.closedDealStatus==="rejected"?"Rejected":"Deal Closed"}));R(t)}if(l?.data&&l.data.length>0){const t=l.data.map(a=>({_id:a._id,productId:a?.product?._id,avatar:a?.product?.image,bid_to:j(a?.sellerDetails?.sellerId),date:b(a?.date),product:a?.product?.title,min_budget:a?.minBudget,your_budget:a?.sellerDetails?.budgetAmount,dealStatus:a?.closedDealStatus==="waiting_seller_approval"||a?.closedDealStatus==="pending"?"Waiting for seller approval":a?.closedDealStatus==="rejected"?"Rejected":"Deal Closed"}));C(t)}},[l,d]),e.jsx("div",{className:"w-full max-w-7xl mx-auto  space-y-6 ",children:e.jsxs("div",{className:"grid space-y-5 w-full",children:[e.jsx("div",{className:"flex justify-between items-center font-semibold w-full mb-3",children:e.jsx("p",{className:"font-bold text-xl whitespace-nowrap   tracking-tight text-gray-600",children:"Closed Deals"})}),e.jsxs(B,{defaultValue:"approved_bids",className:"grid space-y-2 w-full bg-transparent overflow-hidden",onValueChange:t=>_(t),children:[e.jsxs(I,{className:"bg-transparent",children:[e.jsx(p,{value:"approved_bids",className:"cursor-pointer min-w-40 pr-3",children:"Requirements Awarded "}),e.jsxs(p,{value:"completed_requirements",className:"cursor-pointer ",children:[" ",e.jsx("span",{className:"hidden sm:inline-block",children:"Deals "})," Awarded"]})]}),e.jsx(m,{value:"approved_bids",className:"w-full overflow-hidden ",children:A?e.jsx(f,{}):e.jsx(g,{data:k,columns:y,filters:!1,colorPalette:"gray"})}),e.jsx(m,{value:"completed_requirements",className:"w-full overflow-hidden",children:q?e.jsx(f,{}):e.jsx(g,{data:K,columns:w,filters:!1,colorPalette:"gray"})})]})]})})};export{M as default};
